<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
	<title>Drawer - SectionChanger Page</title>
	<link rel="stylesheet"  href="../../lib/tau/wearable/theme/circle/tau.css">
</head>
<body>
<div id="sectionChangerPage" class="ui-page">
	<style>
		#sectionChanger .ui-header {
			background-color: #EDD5B0;
		}
		#sectionChanger .ui-title {
			color: black;
		}
		#sectionChanger .ui-content {
			background-color: #f8866a;
		}
		#leftDrawerHandler {
			width:45px;
			height: 50px;
			position: absolute;
			top: 158px;
			text-indent: -9999px;
			background-color: #000080;
		}
		#rightDrawerHandler {
			width:45px;
			height: 50px;
			position: absolute;
			top: 158px;
			right: 0;
			text-indent: -9999px;
			background-color: #000080;
		}
	</style>
	<div id="sectionChanger" class="ui-content ui-section-changer">
		<div id="scroller">
			<section>
				<header id="sectionHeader1" class="ui-header">
					<h2 class="ui-title">Section 1</h2>
				</header>
				<div id = "sectionContent1" class="ui-content">
					Section 1
				</div>
			</section>
			<section>
				<header id="sectionHeader2" class="ui-header">
					<h2 class="ui-title">Section 2</h2>
				</header>
				<div id = "sectionContent2" class="ui-content">
					Section 2
				</div>
			</section>
			<section>
				<header id="sectionHeader3" class="ui-header">
					<h2 class="ui-title">Section 3</h2>
				</header>
				<div id = "sectionContent3" class="ui-content">
					Section 3
				</div>
			</section>
		</div>
	</div>


	<!-- Drawer Handlers -->
	<a id="leftDrawerHandler" href="#leftDrawer" class="drawer-handler">Left Handler</a>
	<a id="rightDrawerHandler" href="#rightDrawer" class="drawer-handler">Right HAndler</a>

	<!-- More Option -->
	<div id="leftDrawer" class="ui-drawer" data-drawer-target="#sectionChangerPage" data-position="left" data-enable="true" data-drag-edge="1">
		<header class="ui-header">
			<h2 class="ui-title">Left Drawer</h2>
		</header>
		<div id="leftClose" class="ui-content">
			<p>Close</p>
		</div>
	</div>

	<!-- Over View -->
	<div id="rightDrawer" class="ui-drawer" data-drawer-target="#sectionChangerPage" data-position="right" data-enable="true" data-drag-edge="1">
		<header id="rightClose" class="ui-header">
			<h2 class="ui-title">Close</h2>
		</header>
		<div id="drawerSectionChanger" style="width:100%" class="ui-content ui-section-changer">
			<div>
				<section>
					<h3>Section 1</h3>
				</section>
				<section>
					<h3>Section 2</h3>
				</section>
				<section>
					<h3>Section 3</h3>
				</section>
			</div>
		</div>
	</div>

	<script>
		(function(){
			var handlers = [].slice.call(document.getElementsByClassName("drawer-handler")),
					page = document.getElementById("sectionChangerPage"),
					sectionChanger = document.getElementById("sectionChanger"),
					drawerSectionChanger = document.getElementById("drawerSectionChanger"),
					drawerElements = [];

			page.addEventListener( "pagebeforeshow", function() {
				tau.widget.SectionChanger(sectionChanger, {
					circular: false,
					orientation: "horizontal",
					useBouncingEffect: false
				});
				tau.widget.SectionChanger(drawerSectionChanger, {
					circular: false,
					orientation: "horizontal",
					useBouncingEffect: false
				});
				handlers.forEach(function(handler) {
					var drawerElement = document.querySelector(handler.getAttribute("href")),
							drawer = tau.widget.Drawer(drawerElement);
					drawer.setDragHandler(handler);
					tau.event.on(handler, "touchstart touchend", function(e){
						if(drawer.getState().search(/settling/) === 0) {
							return;
						}
						switch (e.type) {
							case "touchstart":
								// open drawer
								drawer.transition(60);
								e.preventDefault();
								e.stopPropagation();
								break;
							case "touchend":
								drawer.close();
								break;
						}
					}, false);
					drawerElements.push(drawer);
				});

				document.getElementById("leftClose").addEventListener("click",function() {
					var drawerElement = tau.util.selectors.getClosestByClass(this, "ui-drawer"),
							drawer = tau.widget.Drawer(drawerElement);
					drawer.close();
				});
				document.getElementById("rightClose").addEventListener("click",function() {
					var drawerElement = tau.util.selectors.getClosestByClass(this, "ui-drawer"),
							drawer = tau.widget.Drawer(drawerElement);
					drawer.close();
				});
			});
		})();

	</script>
</div>
<script type="text/javascript" src="../../lib/tau/wearable/js/tau.js"></script>
</body>
</html>
