<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
	<title>Wearable UI</title>
	<link rel="stylesheet"  href="../lib/tau/wearable/theme/circle/tau.min.css">
</head>
<body>
<div id="sectionChangerPage" class="ui-page">
	<link rel="stylesheet" href="./drawer.css">
	<div id="sectionChanger" class="ui-content ui-section-changer">
		<div id="scroller">
			<section>
				<header id="sectionHeader1" class="ui-header">
					<h2 class="ui-title">Section 1</h2>
				</header>
				<div id = "sectionContent1" class="ui-content sections">
					Section 1
				</div>
			</section>
			<section>
				<header id="sectionHeader2" class="ui-header">
					<h2 class="ui-title">Section 2</h2>
				</header>
				<div id = "sectionContent2" class="ui-content sections">
					Section 2
				</div>
			</section>
			<section>
				<header id="sectionHeader3" class="ui-header">
					<h2 class="ui-title">Section 3</h2>
				</header>
				<div id = "sectionContent3" class="ui-content sections">
					Section 3
				</div>
			</section>
		</div>
	</div>


	<!-- Drawer Handlers -->
	<a id="rightDrawerHandler" href="#rightDrawer" class="drawer-handler">Right HAndler</a>

	<!-- Over View -->
	<div id="rightDrawer" class="ui-drawer" data-drawer-target="#sectionChangerPage" data-position="right" data-enable="true" data-drag-edge="1">
		<div id="pageIndicator" class="ui-page-indicator" style="left:50%; transform:translate3d(-50%, 0, 0);"></div>
		<div id="drawerSectionChanger" style="width:100%" class="ui-content ui-section-changer">
			<div>
				<section>
					<div class="circle-button">1</div>
				</section>
				<section>
					<div class="circle-button">2</div>
				</section>
				<section>
					<div class="circle-button">3</div>
				</section>
			</div>
		</div>
	</div>

	<script>
		(function(){
			var handlers = [].slice.call(document.getElementsByClassName("drawer-handler")),
					page = document.getElementById("sectionChangerPage"),
					sectionChanger = document.getElementById("sectionChanger"),
					drawerSectionChanger = document.getElementById("drawerSectionChanger"),
					drawerElements = [],
					elPageIndicator = document.getElementById("pageIndicator"),
					pageIndicator,
					pageIndicatorHandler;

			page.addEventListener( "pagebeforeshow", function() {
				tau.widget.SectionChanger(sectionChanger, {
					circular: false,
					orientation: "horizontal",
					useBouncingEffect: false
				});
				tau.widget.SectionChanger(drawerSectionChanger, {
					circular: false,
					orientation: "horizontal",
					useBouncingEffect: false
				});
				pageIndicator =  tau.widget.PageIndicator(elPageIndicator, { numberOfPages: 3 });
				pageIndicator.setActive(0);
				handlers.forEach(function(handler) {
					var drawerElement = document.querySelector(handler.getAttribute("href")),
							drawer = tau.widget.Drawer(drawerElement);
					drawer.setDragHandler(handler);
					tau.event.on(handler, "touchstart touchend", function(e){
						if(drawer.getState().search(/settling/) === 0) {
							return;
						}
						switch (e.type) {
							case "touchstart":
								// open drawer
								drawer.transition(60);
								e.preventDefault();
								e.stopPropagation();
								break;
							case "touchend":
								drawer.close();
								break;
						}
					}, false);
					drawerElements.push(drawer);
				});

				if (pageIndicator) {
					pageIndicator =  tau.widget.PageIndicator(elPageIndicator, { numberOfPages: 3 });
					pageIndicator.setActive(0);
				}
				drawerSectionChanger.addEventListener("sectionchange", function(e){
					pageIndicator.setActive(e.detail.active);
				}, false);
			});
		})();

	</script>
</div>
<script type="text/javascript" src="../lib/tau/wearable/js/tau.min.js"></script>
</body>
</html>
