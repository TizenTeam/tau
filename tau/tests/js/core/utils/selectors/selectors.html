<!DOCTYPE html>
<html>
	<head>
		<title>Selector tests</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<link rel="stylesheet" href="../../../../libs/qunit-1.11.0.css">
	</head>
	<body>
		<div id="qunit"></div>
		<div id="qunit-fixture">
		<div data-role='page' id="page1">
			<div class="test1a">
				<div class="test1b">
					<div class="test1a">
						<span id="test1"><span data-role="button"></span></span>
					</div>
				</div>
			</div>
			<div id="test2">
				<p class="test2a">
					<span class="test2a">Nested</span>
				</p>
				<p class="test2a"></p>
				<p class="test2a"></p>
				<h1 class="test2a"></h1>
				<h1 class="test2b"></h1>
			</div>
		</div>
		</div>
		<script src="../../../../libs/jquery.js"></script>
		<script src="../../../../libs/qunit-1.11.0.js" type="text/javascript"></script>
		<script src="../../../../libs/support.js"></script>
		<script type="text/javascript">
			var tauConfig = {
				"autorun": false
			};
		</script>
		<script type="text/javascript" src="../../../../libs/dist/js/tau.js"></script>

		<script>
			module("Matches Selector");
			test("matchesSelector", function () {
				var div1 = document.querySelector("#test2");
				ok(ej.utils.selectors.matchesSelector, "Function exists");
				equal(ej.utils.selectors.matchesSelector(div1, "#test2"), true, "Matches proper selector");
			});

			module("Parents");
			test("getParents", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getParents, "Function exist");
				equal(ej.utils.selectors.getParents(div).length, $(div).parents().length, "Rreturns the same number of elements like jquery");
			});

			test("getParentsBySelector", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getParentsBySelector, "Function exist");
				equal(ej.utils.selectors.getParentsBySelector(div, "div.test1a").length, $(div).parents("div.test1a").length, "Returns the same number of elements like jquery");
				equal(ej.utils.selectors.getParentsBySelector(div, "div.test1b").length, $(div).parents("div.test1b").length, "Returns the same number of elements like jquery");
			});

			test("getParentsByClass", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getParentsByClass, "Function exist");
				equal(ej.utils.selectors.getParentsByClass(div, "test1a").length, $(div).parents(".test1a").length, "Returns the same number of elements like jquery");
				equal(ej.utils.selectors.getParentsByClass(div, "test1b").length, $(div).parents(".test1b").length, "Returns the same number of elements like jquery");
			});

			test("getParentsByTag", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getParentsByTag, "Function exist");
				equal(ej.utils.selectors.getParentsByTag(div, "div").length, $(div).parents("div").length, "Returns the same number of elements like jquery");
			});

			test("getParentsBySelectorNS", function () {
				var div = document.getElementsByClassName("test1a");
				ok(ej.utils.selectors.getParentsBySelectorNS, "Function exist");
				equal(ej.utils.selectors.getParentsBySelectorNS(div[0], "role=page").length, $("#page1").length, "Returns the same number of elements like jquery");
			});

			module("Children");

			test("getChildrenBySelector", function () {
				var div = document.getElementById('test2');
				ok(ej.utils.selectors.getChildrenBySelector, "Function exist");
				equal(ej.utils.selectors.getChildrenBySelector(div, "p.test2a").length, $(div).children("p.test2a").length, "Returns the same number of elements like jquery");
				equal(ej.utils.selectors.getChildrenBySelector(div, "p.test2b").length, $(div).children("p.test2b").length, "Returns the same number of elements like jquery");
			});
			test("getChildrenByDataNS", function () {
				var div = document.getElementById("qunit-fixture");
				ok(ej.utils.selectors.getChildrenByDataNS, "Function exist");
				equal(ej.utils.selectors.getChildrenByDataNS(div, "role=page").length, $("#page1").length, "Returns the same number of elements like jquery");
			});
			test("getChildrenByClass", function () {
				var div = document.getElementById('test2');
				ok(ej.utils.selectors.getChildrenByClass, "Function exist");
				equal(ej.utils.selectors.getChildrenByClass(div, "test2a").length, $(div).children(".test2a").length, "Returns the same number of elements like jquery");
				equal(ej.utils.selectors.getChildrenByClass(div, "test2b").length, $(div).children(".test2b").length, "Returns the same number of elements like jquery");
			});

			test("getChildrenByTag", function () {
				var div = document.getElementById('test2');
				ok(ej.utils.selectors.getChildrenByTag, "Function exist");
				equal(ej.utils.selectors.getChildrenByTag(div, "p").length, $(div).children("p").length, "Returns the same number of elements like jquery");
				equal(ej.utils.selectors.getChildrenByTag(div, "h1").length, $(div).children("h1").length, "Returns the same number of elements like jquery");
			});

			module("Closest");

			test("getClosestBySelector", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getClosestBySelector, "Function exist");
				equal(ej.utils.selectors.getClosestBySelector(div, "div.test1a"), $(div).closest("div.test1a")[0], "Returns the same element like jquery");
				equal(ej.utils.selectors.getClosestBySelector(div, "div.test1b"), $(div).closest("div.test1b")[0], "Returns the same element like jquery");
			});

			test("getClosestByClass", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getClosestByClass, "Function exist");
				equal(ej.utils.selectors.getClosestByClass(div, "test1a"), $(div).closest(".test1a")[0], "Returns the same element like jquery");
				equal(ej.utils.selectors.getClosestByClass(div, "test1b"), $(div).closest(".test1b")[0], "Returns the same element like jquery");
			});

			test("getClosestBySelectorNS", function () {
				var div1 = document.getElementsByClassName("test1a"),
					div2 = document.getElementById("test1");

				ok(ej.utils.selectors.getClosestBySelectorNS, "Function exist");
				equal($(ej.utils.selectors.getClosestBySelectorNS(div1[0], "role=page")).length, $("#page1").length, "Returns the same number of elements like jquery");
				equal($(ej.utils.selectors.getClosestBySelectorNS(div2, "role=page")).length, $("#page1").length, "Returns the same number of elements like jquery");
			});	

			test("getClosestByTag", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getClosestByTag, "Function exist");
				equal(ej.utils.selectors.getClosestByTag(div, "div"), $(div).closest("div")[0], "Returns the same element like jquery");
			});

			module("Data selector");

			test("getAllByDataNS", function () {
				var div = document.getElementById('test1');
				ok(ej.utils.selectors.getAllByDataNS, "Function exist");
				equal(ej.utils.selectors.getAllByDataNS(div, "role=button")[0], $(div).find("[data-role=button]")[0], "Returns the same element like jquery");
			});
		</script>
	</body>
</html>
