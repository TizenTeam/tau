/*
  * Copyright (c) 2013 Samsung Electronics Co., Ltd
  *
  * Licensed under the Flora License, Version 1.1 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *     http://floralicense.org/license/
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */

!function(a,b,c){var d={},e=a.nsConfig=a.nsConfig||{};e.rootNamespace="ns",e.fileName="tau",function(a,b,d,e){var f=0,g=+new Date,h=[].slice,i=e.rootNamespace,j=e.fileName,k=function(a){var b=new Date;a.unshift("["+i+"]["+b.toLocaleString()+"]")};d.getUniqueId=function(){return i+"-"+this.getNumberUniqueId()+"-"+g},d.getNumberUniqueId=function(){return f++},d.log=function(){var a=h.call(arguments);k(a),console&&console.log.apply(console,a)},d.warn=function(){var a=h.call(arguments);k(a),console&&console.warn.apply(console,a)},d.error=function(){var a=h.call(arguments);k(a),console&&console.error.apply(console,a)},d.get=function(a,b){return e[a]===c?b:e[a]},d.set=function(a,b){e[a]=b},d.getFrameworkPath=function(){var a,c,d,e,f=b.getElementsByTagName("script"),g=f.length;for(a=0;g>a;a++)if(c=f[a].src,d=c.split("/"),e=d.length,d[e-1]===j+".js"||d[e-1]===j+".min.js")return d.slice(0,e-1).join("/");return null}}(a,a.document,d,e),function(a){a.set("rootDir",a.getFrameworkPath()),a.set("version",""),a.set("allowCrossDomainPages",!1),a.set("domCache",!1)}(d),function(a,b){var c,d={noConflict:function(){var b=a.tau;return a.tau=c,c=null,b},getOrginalNamespace:function(){return c},createNewNamespace:function(){c=c||a.tau,a.tau=d}};d.createNewNamespace(),b.addEventListener("mobileinit",d.createNewNamespace,!1)}(a,b),function(a,b){var c=null,d=(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||function(b){c=a.setTimeout(b.bind(b,+new Date),1e3/60)}).bind(a),e=b.utils||{};e.requestAnimationFrame=d,e.cancelAnimationFrame=(a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.oCancelAnimationFrame||function(){a.clearTimeout(c)}).bind(a),e.async=d,e.isNumber=function(a){var b=parseFloat(a);return!isNaN(b)&&isFinite(b)},b.utils=e}(a,d),function(d){var e={trigger:function(a,b,c,d,e){var f=new CustomEvent(b,{detail:c,bubbles:"boolean"==typeof d?d:!0,cancelable:"boolean"==typeof e?e:!0});return a.dispatchEvent(f)},preventDefault:function(a){var b=a._originalEvent;b&&b.preventDefault&&b.preventDefault(),a.preventDefault()},stopPropagation:function(a){var b=a._originalEvent;b&&b.stopPropagation&&b.stopPropagation(),a.stopPropagation()},stopImmediatePropagation:function(a){var b=a._originalEvent;b&&b.stopImmediatePropagation&&b.stopImmediatePropagation(),a.stopImmediatePropagation()},documentRelativeCoordsFromEvent:function(c){var d,e=c?c:a.event,f={x:e.clientX,y:e.clientY},g={x:e.pageX,y:e.pageY},h=0,i=0,j=b.body,k=b.documentElement;return c.type.match(/^touch/)&&(d=e.originalEvent.targetTouches[0],g={x:d.pageX,y:d.pageY},f={x:d.clientX,y:d.clientY}),g.x||g.y?(h=g.x,i=g.y):(f.x||f.y)&&(h=f.x+j.scrollLeft+k.scrollLeft,i=f.y+j.scrollTop+k.scrollTop),{x:h,y:i}},targetRelativeCoordsFromEvent:function(a){var b=a.target,d={x:a.offsetX,y:a.offsetY};return(d.x===c||isNaN(d.x)||d.y===c||isNaN(d.y))&&(d=e.documentRelativeCoordsFromEvent(a),d.x-=b.offsetLeft,d.y-=b.offsetTop),d},on:function(a,b,c,d){a.addEventListener(b,c,d||!1)},off:function(a,b,c,d){a.removeEventListener(b,c,d||!1)},onMany:function(a,b,c,d){var f,g=a.length;for(f=0;g>f;f++)e.on(a[f],b,c,d)},offMany:function(a,b,c,d){var f,g=a.length;for(f=0;g>f;f++)e.off(a[f],b,c,d)},one:function(a,b,c,d){var f=function(){e.off(a,b,f,d),c.apply(this,arguments)};e.on(a,b,f,d)}};d.utils.events=e}(d),function(a,b,d){function e(a,d,e,f,g,h,i,j){var k;return!u[a]||i?(f=f||[],f.push("destroy","disable","enable","option","refresh","value"),k={name:a,methods:f,selector:e||"",selectors:e?e.split(",").map(y):[],binding:d||"",widgetClass:g||null,namespace:h||"",widgetNameToLowercase:j===c?!0:!!j},u[a]=k,t.trigger(b,"widgetdefined",k,!1),!0):!1}function f(a,c,d,e){var f,g=e||{},h=g.create,i=a.widgetClass,j=i?new i(d):!1;return j&&(j.configure(a,d,e),typeof h===A&&t.on(d,a.name.toLowerCase()+"create",h),d.id&&(j.id=d.id),d.getAttribute(C)!==B&&(d=j.build(c,d)),d&&(j.element=d,k(j),f=function(a){x?j.bindEvents(a,!0):(j.init(a),j.bindEvents(a)),t.trigger(a,K,j,!1),t.trigger(b,K,j)}.bind(null,d),t.one(d,J,f,!0),j.trigger(J,j,!1))),j.element}function g(a,c){var d,e,f;for(typeof a===z&&(a=b.getElementById(a)),c||(d=j(a),d&&(d.destroy(),d.trigger("widgetdestroyed"))),e=s.call(a.querySelectorAll("["+E+"='true']")),f=e.length-1;f>=0;f-=1)e[f]&&g(e[f]);m(a)}function h(a,b,c){var d=b.getAttribute(D);return a=a||d&&u[d]||{name:d,selector:b.getAttribute(F),binding:b.getAttribute(F)},f(a,null,b,c)}function i(a){var c,d,e,f=s.call(a.querySelectorAll(G)),g=Object.keys(u),i=[],j=g.length;for(f.forEach(h.bind(null,null)),c=0;j>c;++c)d=u[g[c]],e=d.selectors,e.length&&(i=s.call(a.querySelectorAll(e.join(H+",")+H)),i.forEach(h.bind(null,d)));t.trigger(b,"built"),t.trigger(b,I)}function j(a){var c,d,e=a&&typeof a!==z?a.id:a;if(typeof a===z&&(a=b.getElementById(e)),c=v[e],"object"==typeof c){if(d=c.instance,d.element===a)return d;a?d.destroy(a):d.destroy()}return null}function k(a){var b=a.id;v[b]={elementId:b,element:a.element,binding:a.binding,instance:a}}function l(a){a.removeAttribute(C),a.removeAttribute(E),a.removeAttribute(D),a.removeAttribute(F)}function m(a){var c=typeof a===z?a:a.id;return typeof a===z&&(a=b.getElementById(c)),a&&l(a),v[c]?(v[c].element&&typeof v[c].element.setAttribute===A&&l(v[c].element),delete v[c],!0):!1}function n(a){i(a.target)}function o(){r&&(t.trigger(b,"beforerouterinit",r,!1),r.init(x),t.trigger(b,"routerinit",r,!1))}function p(){r&&r.destroy()}var q,r,s=[].slice,t=d.utils.events,u={},v={},w=a.location,x="#build"===w.hash,y=function(a){return a.trim()},z="string",A="function",B="true",C="data-ej-built",D="data-ej-name",E="data-ej-bound",F="data-ej-selector",G="*["+C+"=true]["+F+"]["+D+"]:not(["+E+"])",H=":not(["+C+"]):not(["+E+"])",I="bound",J="widgetbuilt",K="widgetbound";d.widgetDefinitions={},q={justBuild:"#build"===w.hash,dataEj:{built:C,name:D,bound:E,selector:F},destroyWidget:g,createWidgets:i,getDefinitions:function(){return u},getWidgetDefinition:function(a){return u[a]},defineWidget:e,getBinding:j,setBinding:k,removeBinding:m,_clearBindings:function(){v={}},build:o,run:function(){p(),t.on(b,"create",n),t.trigger(b,"mobileinit"),"complete"===b.readyState?o():t.on(b,"DOMContentLoaded",o.bind(q))},getRouter:function(){return r},initRouter:function(a){r=new a},instanceWidget:function(a,b,c){var e,f=j(a);return a?(!f&&u[b]&&(e=u[b],a=h(e,a,c),f=j(a)),f):(d.error("'element' cannot be empty"),null)},stop:p,setJustBuild:function(a){w.hash=a?"build":"",x=a},getJustBuild:function(){return x},_createEventHandler:n},d.engine=q}(a,a.document,d),function(a){a.router=a.router||{}}(d),function(a){a.router.micro=a.router.micro||{}}(d),function(a){a.router.micro.route=a.router.micro.route||{}}(d),function(a){var b={copy:function(a){return b.merge({},a)},merge:function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},multiMerge:function(){var a,b,d,e,f,g=[].slice.call(arguments),h=g.length;for(a=g.shift(),d=!0,"boolean"==typeof arguments[h-1]&&(d=arguments[h-1],h--),f=0;h>f;f++)if(b=g.shift(),null!==b)for(e in b)b.hasOwnProperty(e)&&(d||a[e]===c)&&(a[e]=b[e]);return a},inherit:function(a,b,c){var d,e,f=new b;for(d in c)c.hasOwnProperty(d)&&(e=c[d],f[d]="function"==typeof e?function(a,b,c){var d=function(){var c=a.prototype[b];return c?c.apply(this,arguments):null};return function(){var a,b=this._super;return this._super=d,a=c.apply(this,arguments),this._super=b,a}}(b,d,e):e);a.prototype=f,a.prototype.constructor=a}};a.utils.object=b}(d),function(a,b){var c,d=b.utils.object,e=0,f=0,g=a.history,h={activeState:null,replace:function(a,b,i){var j=d.multiMerge({},a,{uid:c?f:++e});g[c?"replaceState":"pushState"](j,b,i),h.setActive(j)},back:function(){g.back()},setActive:function(a){return a&&(h.activeState=a,f=a.uid,a.volatileRecord)?(h.enableVolatileRecord(),void 0):(h.disableVolatileMode(),void 0)},getDirection:function(a){return a?a.uid<f?"back":"forward":"back"},enableVolatileRecord:function(){c=!0},disableVolatileMode:function(){c=!1}};b.router.micro.history=h}(a,d),function(a,b,d){a.addEventListener("beforerouterinit",function(){var a=d.getOrginalNamespace();d.autoInitializePage=a&&a.autoInitializePage!==c?a.autoInitializePage:!0,b.set("autoInitializePage",d.autoInitializePage)},!1),a.addEventListener("routerinit",function(e){var f,g=e.detail,h=b.router.micro.history,i=h.back.bind(g),j=(g.open.bind(g),b.router.micro.route);d.changePage=g.open.bind(g),a.addEventListener("pageshow",function(){d.activePage=a.querySelector("."+b.widget.micro.Page.classes.uiPageActive)}),d.firstPage=g.getFirstPage(),d.back=i,d.initializePage=g.init.bind(g),d.pageContainer=g.container,d.rule=j,d.openPopup=function(a,b){var d;d=a&&a.length!==c&&"object"==typeof a?a[0]:a,g.openPopup(d,b)},d.closePopup=g.closePopup.bind(g),f=g,f.rule=j,f.back=i,f.history=h,d.navigator=f},!1)}(a.document,d,a.tau),function(a){var b=a.micro||{};b.selectors={},a.micro=b}(d),function(a,b,c){a.addEventListener("mobileinit",function(){var a,d=b.micro.selectors;c.defaults={autoInitializePage:!0,pageTransition:"none",popupTransition:"none"},c.dynamicBaseEnabled=!0,c.selectors=d,a=c.navigator||{},a.defaults={fromHashChange:!1,reverse:!1,showLoadMsg:!0,loadMsgDelay:0},c.navigator=a},!1)}(b,d,a.tau),function(a,b){function c(a){var c=b.get(c);return"[data-"+(c?c+"-":"")+a+"]"}function d(a,b){return k?a[k](b):!1}function e(b){for(var c=[],d=b.parentNode;d&&d!==a;)c.push(d),d=d.parentNode;return c}function f(b,c){for(var d=b;d&&d!==a;){if(c(d))return d;d=d.parentNode}return null}function g(a,b){return d(b,a)}function h(a,b){return b&&b.classList&&b.classList.contains(a)}function i(a,b){return b.tagName.toLowerCase()===a}var j=[].slice,k=function(){var b=a.createElement("div");return"function"==typeof b.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof b.mozMatchesSelector?"mozMatchesSelector":"function"==typeof b.msMatchesSelector?"msMatchesSelector":"function"==typeof b.matchesSelector?"matchesSelector":!1}();b.utils.selectors={matchesSelector:d,getChildrenBySelector:function(a,b){return j.call(a.children).filter(g.bind(null,b))},getChildrenByDataNS:function(a,b){return j.call(a.children).filter(g.bind(null,c(b)))},getChildrenByClass:function(a,b){return j.call(a.children).filter(h.bind(null,b))},getChildrenByTag:function(a,b){return j.call(a.children).filter(i.bind(null,b))},getParents:e,getParentsBySelector:function(a,b){return e(a).filter(g.bind(null,b))},getParentsBySelectorNS:function(a,b){return e(a).filter(g.bind(null,c(b)))},getParentsByClass:function(a,b){return e(a).filter(h.bind(null,b))},getParentsByTag:function(a,b){return e(a).filter(i.bind(null,b))},getClosestBySelector:function(a,b){return f(a,g.bind(null,b))},getClosestBySelectorNS:function(a,b){return f(a,g.bind(null,c(b)))},getClosestByClass:function(a,b){return f(a,h.bind(null,b))},getClosestByTag:function(a,b){return f(a,i.bind(null,b))},getAllByDataNS:function(a,b){return j.call(a.querySelectorAll(c(b)))}}}(a.document,d),function(a){a.utils.DOM=a.utils.DOM||{}}(d),function(a,b,d){function e(a){var b=d.get(b);return"data-"+(b?b+"-":"")+a}var f=d.utils.selectors,g=d.utils.DOM;g.inheritAttr=function(a,b,c){var d,e=a.getAttribute(b);return!e&&(d=f.getClosestBySelector(a,c))?d.getAttribute(b):e},g.getNumberFromAttribute=function(a,b,c,d){var e=a.getAttribute(b),f=d;return e&&("float"===c?(e=parseFloat(e),e&&(f=e)):(e=parseInt(e,10),e&&(f=e))),f},g.setNSData=function(a,b,c){a.setAttribute(e(b),c)},g.getNSData=function(a,b){var c=a.getAttribute(e(b));return"true"===c?!0:"false"===c?!1:c},g.hasNSData=function(a,b){return a.hasAttribute(e(b))},g.nsData=function(a,b,d){return d===c?g.getNSData(a,b):g.setNSdata(a,b,d)},g.removeNSData=function(a,b){a.removeAttribute(e(b))},g.getData=function(a){var b,c,d,e="data-",f={},g=a.attributes,h=g.length;for(d=0;h>d;d++)b=g.item(d),c=b.nodeName,c.indexOf(e)>-1&&(f[c.replace(e,"")]=b.nodeValue);return f},g.removeAttribute=function(a,b){a.removeAttribute(b),a[b]=!1},g.setAttribute=function(a,b,c){a[b]=c,a.setAttribute(b,c)}}(a,a.document,d),function(a,b,d){var e,f=d.engine,g=d.utils.object,h=d.utils.selectors,i=d.utils.DOM,j={},k={uiStateKey:"&ui-state",urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(b){var c=this.parseUrl(b||a.location.href),d=c.hash;return d="#"===d?"":d,j=c,c.protocol+"//"+c.host+c.pathname+c.search+d},getDocumentUrl:function(a){return a?g.copy(k.documentUrl):k.documentUrl.href},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(a){var b;return"object"==typeof a?a:(b=k.urlParseRE.exec(a||"")||[],{href:b[0]||"",hrefNoHash:b[1]||"",hrefNoSearch:b[2]||"",domain:b[3]||"",protocol:b[4]||"",doubleSlash:b[5]||"",authority:b[6]||"",username:b[8]||"",password:b[9]||"",host:b[10]||"",hostname:b[11]||"",port:b[12]||"",pathname:b[13]||"",directory:b[14]||"",filename:b[15]||"",search:b[16]||"",hash:b[17]||""})},makePathAbsolute:function(a,b){var c,d,e,f;if(a&&"/"===a.charAt(0))return a;for(a=a||"",b=b?b.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"",c=b?b.split("/"):[],d=a.split("/"),f=0;f<d.length;f++)switch(e=d[f]){case".":break;case"..":c.length&&c.pop();break;default:c.push(e)}return"/"+c.join("/")},isSameDomain:function(a,b){return k.parseUrl(a).domain===k.parseUrl(b).domain},isRelativeUrl:function(a){return""===k.parseUrl(a).protocol},isAbsoluteUrl:function(a){return""!==k.parseUrl(a).protocol},makeUrlAbsolute:function(a,b){if(!k.isRelativeUrl(a))return a;var c=k.parseUrl(a),d=k.parseUrl(b),e=c.protocol||d.protocol,f=c.protocol?c.doubleSlash:c.doubleSlash||d.doubleSlash,g=c.authority||d.authority,h=""!==c.pathname,i=k.makePathAbsolute(c.pathname||d.filename,d.pathname),j=c.search||!h&&d.search||"",l=c.hash;return e+f+g+i+j+l},addSearchParams:function(a,b){var c=k.parseUrl(a),d="object"==typeof b?this.getAsURIParameters(b):b,e=c.search||"?";return c.hrefNoSearch+e+("?"===e.charAt(e.length-1)?"":"&")+d+(c.hash||"")},addHashSearchParams:function(a,b){var c=k.parseUrl(a),d="object"==typeof b?k.getAsURIParameters(b):b,e=c.hash,f=e?e.indexOf("?")<0?e+"?":e+"&":"#?";return c.hrefNoHash+f+("?"===f.charAt(f.length-1)?"":"&")+d},convertUrlToDataUrl:function(b,c,d){var e=k.parseUrl(b);return k.isEmbeddedPage(e,c)?e.hash.replace(/^#|\?.*$/g,""):(d=d||k.documentBase,k.isSameDomain(e,d)?e.hrefNoHash.replace(d.domain,""):a.decodeURIComponent(b))},get:function(a){return a===c&&(a=this.parseLocation().hash),this.stripHash(a).replace(/[^\/]*\.[^\/*]+$/,"")},isPath:function(a){return/\//.test(a)},clean:function(a,b){return a.replace(b.domain,"")},stripHash:function(a){return a.replace(/^#/,"")},stripQueryParams:function(a){return a.replace(/\?.*$/,"")},isHashValid:function(a){return/^#[^#]+$/.test(a)},isExternal:function(a,b){var c=k.parseUrl(a);return c.protocol&&c.domain!==b.domain?!0:!1},hasProtocol:function(a){return/^(:?\w+:)/.test(a)},isEmbedded:function(a){var b=k.parseUrl(a);return""!==b.protocol?!k.isPath(b.hash)&&!!b.hash&&b.hrefNoHash===k.parseLocation().hrefNoHash:/^#/.test(b.href)},squash:function(a,b){var c,d,e,f,g=this.isPath(a),h=this.parseUrl(a),i=h.hash,j="";return b=b||(k.isPath(a)?k.getLocation():k.getDocumentUrl()),d=g?k.stripHash(a):a,d=k.isPath(h.hash)?k.stripHash(h.hash):d,f=d.indexOf(this.uiStateKey),f>-1&&(j=d.slice(f),d=d.slice(0,f)),c=k.makeUrlAbsolute(d,b),e=this.parseUrl(c).search,g?((k.isPath(i)||0===i.replace("#","").indexOf(this.uiStateKey))&&(i=""),j&&-1===i.indexOf(this.uiStateKey)&&(i+=j),-1===i.indexOf("#")&&""!==i&&(i="#"+i),c=k.parseUrl(c),c=c.protocol+"//"+c.host+c.pathname+e+i):c+=c.indexOf("#")>-1?j:"#"+j,c},isPreservableHash:function(a){return 0===a.replace("#","").indexOf(this.uiStateKey)},hashToSelector:function(a){var b="#"===a.substring(0,1);return b&&(a=a.substring(1)),(b?"#":"")+a.replace(new RegExp("([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])","g"),"\\$1")},isFirstPageUrl:function(a,b,d,e){var g,h,i,j,l;return b=b===c?k.documentBase:b,d=d===c?k.documentBaseDiffers:d,e=e===c?k.documentUrl:e,g=k.parseUrl(k.makeUrlAbsolute(a,b)),h=g.hrefNoHash===e.hrefNoHash||d&&g.hrefNoHash===b.hrefNoHash,i=f.getRouter().firstPage,j=i?i.id:c,l=g.hash,h&&(!l||"#"===l||j&&l.replace(/^#/,"")===j)},isPermittedCrossDomainRequest:function(a,b){return d.get("allowCrossDomainPages",!1)&&"file:"===a.protocol&&-1!==b.search(/^https?:/)},getAsURIParameters:function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b])+"&");return c.substring(0,c.length-1)},documentUrl:null,documentBaseDiffers:!1,set:function(a){j.hash=a},getFilePath:function(a,b){var c="&"+d.get("subPageUrlKey","");return a&&a.split(c)[0].split(b)[0]},cleanHash:function(a,b){return k.stripHash(a.replace(/\?.*$/,"").replace(b,""))},isEmbeddedPage:function(a,b){var c=k.parseUrl(a);return""!==c.protocol?c.hash&&(b?c.hrefNoHash===k.documentUrl.hrefNoHash:c.hrefNoHash===k.parseLocation().hrefNoHash):/^#/.test(c.href)}};k.documentUrl=k.parseLocation(),e=b.querySelector("base"),k.documentBase=e?k.parseUrl(k.makeUrlAbsolute(e.getAttribute("href"),k.documentUrl.href)):k.documentUrl,k.documentBaseDiffers=k.documentUrl.hrefNoHash!==k.documentBase.hrefNoHash,k.getDocumentBase=function(a){return a?g.copy(k.documentBase):k.documentBase.href},k.getClosestBaseUrl=function(a,b){var c=i.getNSData(h.getClosestBySelector(a,b),"url"),e=k.documentBase.hrefNoHash;return d.get("dynamicBaseEnabled",!0)&&c&&k.isPath(c)||(c=e),k.makeUrlAbsolute(c,e)},d.utils.path=k}(a,a.document,d),function(a,b,c){var d=c.utils.DOM;d.getCSSProperty=function(b,c,d,e){var f=a.getComputedStyle(b),g=null,h=d;if(f&&(g=f.getPropertyValue(c)))switch(e){case"integer":g=parseInt(g,10),isNaN(g)||(h=g);break;case"float":g=parseFloat(g),isNaN(g)||(h=g);break;default:h=g}return h},d.extractCSSProperties=function(b,d,e,f){var g,h=a.getComputedStyle(b,e),i=null,j=c.utils;for(g in d)d.hasOwnProperty(g)&&(i=h.getPropertyValue(g),d[g]=j.isNumber(i)&&!f?i.match(/\./gi)?parseFloat(i):parseInt(i,10):i)},d.getElementHeight=function(a,b,c,d,e,f){var g,h=0,i=null,j=null,k=null,l=b&&"outer"===b||!1,m=0,n={height:0,"margin-top":0,"margin-bottom":0,"padding-top":0,"padding-bottom":0,"border-top-width":0,"border-bottom-width":0,"box-sizing":""};return a&&(g=a.style,"none"!==g.display?(this.extractCSSProperties(a,n,e),m=a.offsetHeight):f&&(i=g.display,j=g.visibility,k=g.position,g.display="block",g.visibility="hidden",g.position="relative",this.extractCSSProperties(a,n,e),m=a.offsetHeight,g.display=i,g.visibility=j,g.position=k),h+=n.height+n["padding-top"]+n["padding-bottom"],c?h=m:l&&"border-box"!==n["box-sizing"]&&(h+=n["border-top-width"]+n["border-bottom-width"]),d&&(h+=Math.max(0,n["margin-top"])+Math.max(0,n["margin-bottom"]))),h},d.getElementWidth=function(a,b,c,d,e,f){var g,h=0,i=null,j=null,k=null,l=0,m=b&&"outer"===b||!1,n={width:0,"margin-left":0,"margin-right":0,"padding-left":0,"padding-right":0,"border-left-width":0,"border-right-width":0,"box-sizing":""};return a&&(g=a.style,"none"!==g.display?(this.extractCSSProperties(a,n,e),l=a.offsetWidth):f&&(i=g.display,j=g.visibility,k=g.position,g.display="block",g.visibility="hidden",g.position="relative",this.extractCSSProperties(a,n,e),g.display=i,g.visibility=j,g.position=k),h+=n.width+n["padding-left"]+n["padding-right"],c?h=l:m&&"border-box"!==n["box-sizing"]&&(h+=n["border-left-width"]+n["border-right-width"]),d&&(h+=Math.max(0,n["margin-left"])+Math.max(0,n["margin-right"]))),h},d.getElementOffset=function(a){var b=0,c=0;do c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;while(null!==a);return{top:c,left:b}}}(a,a.document,d),function(a,b,c){a.addEventListener("mobileinit",function(){var a=b.utils,d=a.DOM,e=a.events,f=a.object;c.path=a.path,c.fireEvent=e.trigger.bind(e),c.getData=d.getData.bind(d),c.extendObject=f.multiMerge.bind(f),c.inherit=f.inherit.bind(f),c.dom={getOffset:d.getElementOffset.bind(d),triggerCustomEvent:e.trigger.bind(e),data:d.nsData.bind(d)}},!1)}(a.document,d,a.tau),function(a){a.widget=a.widget||{}}(d),function(a,b){var d=[].slice,e=b.engine,f=e.dataEj,g=b.utils,h=g.events,i=g.DOM,j=g.object,k=function(){return this},l={},m="function";l.configure=function(a,c,d){var e,f,g=this;g.options=g.options||{},g.element=g.element||null,a&&(e=a.name,f=a.namespace,g.name=e,g.widgetName=e,g.widgetEventPrefix=e.toLowerCase(),g.namespace=f,g.widgetFullName=((f?f+"-":"")+e).toLowerCase(),g.id=b.getUniqueId(),g.selector=a.selector),typeof g._configure===m&&g._configure(),g._getCreateOptions(c),j.merge(g.options,d)},l._getCreateOptions=function(a){var b=this.options,d=new RegExp(/[A-Z]/g);return b!==c&&Object.keys(b).forEach(function(c){var e=i.getNSData(a,c.replace(d,function(a){return"-"+a.toLowerCase()}));null!==e&&(b[c]=e)}),b},l.build=function(a,b){var c,d,e=this;return h.trigger(b,this.widgetEventPrefix+"beforecreate"),b.setAttribute(f.built,!0),b.setAttribute(f.binding,e.binding),b.setAttribute(f.name,e.name),b.setAttribute(f.selector,e.selector),c=b.id,c?e.id=c:b.id=e.id,d=typeof e._build===m?e._build(a,b):b},l.init=function(a){var b=this;return b.id=a.id,typeof b._init===m&&b._init(a),a.getAttribute("disabled")?b.disable():b.enable(),b},l.bindEvents=function(a,b){var c=this;return b||a.setAttribute(f.bound,"true"),typeof c._buildBindEvents===m&&c._buildBindEvents(a),b||typeof c._bindEvents!==m||c._bindEvents(a),c.trigger(c.widgetEventPrefix+"create",c),c},l.destroy=function(a){var b=this;typeof b._destroy===m&&b._destroy(a),b.element&&b.trigger(b.widgetEventPrefix+"destroy"),a=a||b.element,a&&e.removeBinding(a)},l.disable=function(){var a=this,b=a.element,c=d.call(arguments);return typeof a._disable===m&&(c.unshift(b),a._disable.apply(a,c)),this},l.enable=function(){var a=this,b=a.element,c=d.call(arguments);return typeof a._enable===m&&(c.unshift(b),a._enable.apply(a,c)),this},l.refresh=function(){var a=this;return typeof a._refresh===m&&a._refresh(),a},l.option=function(){var a,b=this,e=d.call(arguments),f=e.shift(),g=e.shift();if("string"==typeof f){if(g===c)return a="_get"+(f[0].toUpperCase()+f.slice(1)),typeof b[a]===m?b[a]():b.options[f];a="_set"+(f[0].toUpperCase()+f.slice(1)),typeof b[a]===m?b[a](b.element,g):(this.options[f]=g,b.element&&(b.element.setAttribute("data-"+f.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),g),b.refresh()))}},l.isBound=function(){var a=this.element;return a&&a.hasAttribute(f.bound)},l.isBuilt=function(){var a=this.element;return a&&a.hasAttribute(f.built)},l.value=function(a){var b=this;return a!==c?typeof b._setValue===m?b._setValue(a):b:typeof b._getValue===m?b._getValue():b},l.trigger=function(a,b,c,d){return h.trigger(this.element,a,b,c,d)},l.on=function(a,b,c){h.on(this.element,a,b,c)},l.off=function(a,b,c){h.off(this.element,a,b,c)},k.prototype=l,b.widget.BaseWidget=k}(a.document,d),function(a,b,c){c.widget={},a.addEventListener("widgetdefined",function(a){var d=a.detail,e=d.name,f=b.engine;c.widget[e]=function(a){return function(b,c){return f.instanceWidget(b,a,c)}}(e)},!1)}(a.document,d,a.tau),function(a,b,c){function d(a){return a=v.getClosestBySelector(a,"a, label")}function e(a){return a=v.getClosestByTag(a,"li")}function f(){var a;p=d(p),o||!p||"A"!==p.tagName&&"LABEL"!==p.tagName||(a=e(p),a&&a.classList.add(u))}function g(){return a.getElementsByClassName(u)}function h(){var a,b=g(),c=b.length;for(a=0;c>a;a++)b[a].classList.remove(u)}function i(a){var b=a.touches[0];o=o||Math.abs(b.clientX-m)>t.scrollThreshold||Math.abs(b.clientY-n)>t.scrollThreshold,o&&(s(),h())}function j(b){var c=b.touches,d=c[0];q=c.length,1===q&&(o=!1,m=d.clientX,n=d.clientY,p=b.target,a.addEventListener("touchmove",i,!1),clearTimeout(r),r=setTimeout(f,t.addActiveClassDelay))}function k(){1===q&&(clearTimeout(r),r=null,o||setTimeout(h,t.keepActiveClassDelay),o=!1)}function l(){a.addEventListener("touchstart",j,!1),a.addEventListener("touchend",k,!1),b.addEventListener("pagehide",h,!1)}var m,n,o,p,q,r,s,t={scrollThreshold:5,addActiveClassDelay:10,keepActiveClassDelay:100},u="ui-li-active",v=c.utils.selectors;s=function(){a.removeEventListener("touchmove",i,!1)},l()}(b,a,d),function(a,b){b.widget.micro=b.widget.micro||{}}(a,d),function(b,c){function d(b){var c,d,e,f,g,i,j=b.element,k=a.innerWidth,l=a.innerHeight,n=m.uiContent,o=m.uiHeader,p=m.uiFooter,q=0,r=[].slice.call(j.children),s=r.length,t=j.style;for(t.width=k+"px",t.height=l+"px",c=0;s>c;c++)d=r[c],(d.classList.contains(o)||d.classList.contains(p))&&(q+=h.getElementHeight(d));for(c=0;s>c;c++)d=r[c],i=d.style,d.classList.contains(n)&&(e=a.getComputedStyle(d),f=parseFloat(e.marginTop),g=parseFloat(e.marginBottom),i.height=l-q-f-g+"px",i.width=k+"px")}var e=c.widget.BaseWidget,f=c.micro.selectors,g=c.utils,h=g.DOM,i=g.object,j=c.engine,k=function(){var a=this;a.pageSetHeight=!1,a.contentFillCallback=null,a.contentFillAfterResizeCallback=null,a.options={}},l={SHOW:"pageshow",HIDE:"pagehide",CREATE:"pagecreate",BEFORE_CREATE:"pagebeforecreate",BEFORE_SHOW:"pagebeforeshow",BEFORE_HIDE:"pagebeforehide"},m={uiPage:"ui-page",uiPageActive:"ui-page-active",uiSection:"ui-section",uiHeader:"ui-header",uiFooter:"ui-footer",uiContent:"ui-content",uiPageScroll:"ui-page-scroll"},n={};k.classes=m,k.events=l,f.page="."+m.uiPage,f.activePage="."+m.uiPageActive,f.section="."+m.uiSection,f.header="."+m.uiHeader,f.footer="."+m.uiFooter,f.content="."+m.uiContent,f.pageScroll="."+m.uiPageScroll,n._build=function(a,b){return b.classList.add(m.uiPage),b},n.setActive=function(a){var b=this.element.classList;a?b.add(m.uiPageActive):b.remove(m.uiPageActive)},n._bindEvents=function(b){var c=this;c.contentFillCallback=d.bind(null,c),c.contentFillAfterResizeCallback=function(){c.pageSetHeight=!1,d(c)},a.addEventListener("resize",c.contentFillAfterResizeCallback,!1),b.addEventListener("pageshow",c.contentFillCallback,!1)},n._refresh=function(){d(this)},n._init=function(a){this.element=a,d(this)},n.onBeforeShow=function(){this.trigger(l.BEFORE_SHOW)},n.onShow=function(){this.trigger(l.SHOW)},n.onBeforeHide=function(){this.trigger(l.BEFORE_HIDE)},n.onHide=function(){this.trigger(l.HIDE)},n._destroy=function(){var b=this,c=b.element;c=c||b.element,a.removeEventListener("resize",b.contentFillAfterResizeCallback,!1),c.removeEventListener("pageshow",b.contentFillCallback,!1),j.destroyWidget(c,!0)},i.inherit(k,e,n),c.widget.micro.Page=k,j.defineWidget("page","","[data-role=page],.ui-page",["onBeforeShow","onShow","onBeforeHide","onHide","setActive"],k,"micro")}(a.document,d),function(a,b,c,d){var e=function(){var a=this,b={};a.options={header:!1,footer:!1},a._elementClassList=null,a.ui=b,b.header=null,b.footer=null,b.content=null,a.active=!1},f=d.widget.BaseWidget,g=d.engine,h=d.utils.object,i=d.micro.selectors,j={},k={active:"ui-popup-active",header:"ui-popup-header",footer:"ui-popup-footer",content:"ui-popup-content",background:"ui-popup-background",toast:"ui-popup-toast"};e.events={show:"popupshow",hide:"popuphide",before_show:"popupbeforeshow",before_hide:"popupbeforehide"},e.classes=k,i.popup=".ui-popup",j._build=function(a,c){var d,e,f,g=this.ui,h=this.options,i=c.querySelector("."+k.header),j=c.querySelector("."+k.content),l=c.querySelector("."+k.footer);if(!j){if(j=b.createElement("div"),j.className=k.content,c.children.length>0)for(d=0,e=c.children.length;e>d;++d)f=c.children[d],f!==l&&f!==i&&j.appendChild(c.children[d]);c.appendChild(j)}return i||h.header===!1||(i=b.createElement("div"),i.className=k.header,"boolean"!=typeof h.header&&(i.innerHTML=h.header),c.insertBefore(i,j)),l||h.footer===!1||(l=b.createElement("div"),l.className=k.footer,"boolean"!=typeof h.footer&&(l.innerHTML=h.footer),c.appendChild(l)),g.header=i,g.content=j,g.footer=l,c},j._init=function(a){var b=this,c=b.ui;c.header||(c.header=a.querySelector("."+k.header)),c.footer||(c.footer=a.querySelector("."+k.footer)),c.content||(c.content=a.querySelector("."+k.content)),c.content.style.overflowY="scroll",b._elementClassList=a.classList,b._refresh()},j._bindEvents=function(){var c=this;c.closeFunction=function(){c.close({transition:"none"})},c.onResize=function(){c.active===!0&&c._refresh()},a.addEventListener("resize",c.onResize,!1),b.addEventListener("pagebeforehide",c.closeFunction,!1)},j._destroy=function(){a.removeEventListener("resize",this.onResize,!1),b.removeEventListener("pagebeforehide",this.closeFunction,!1)},j._refresh=function(){var b,c,e,f=this.ui,g=f.header,h=f.footer,i=this.element,j=f.content,l={"margin-top":0,"margin-bottom":0,"margin-left":0,"margin-right":0,"border-width":0,display:null},m=i.style,n=j.style,o=0,p=0,q=0,r=i.classList.contains(k.toast),s=d.utils.DOM,t="",u="";s.extractCSSProperties(i,l),b=parseFloat(l["border-width"])||0,e="none"===l.display,e&&(t=m.display,u=m.visibility,m.visibility="hidden",m.display="block"),c=a.innerWidth-(parseInt(l["margin-left"],10)+parseInt(l["margin-right"],10)),m.width=c+"px",r||(g&&(o=g.offsetHeight),h&&(p=h.offsetHeight),q=a.innerHeight-(parseInt(l["margin-top"],10)+parseInt(l["margin-bottom"],10)),m.height=q+"px",n.height=q-o-p-2*b+"px",n.overflowY="scroll"),e&&(m.display=t,m.visibility=u)},j._setActive=function(a){var b=k.active,c=this._elementClassList;a?c.add(b):c.remove(b),this.active=c.contains(b)},j.open=function(a){var c=h.multiMerge({},a,{ext:" in ui-pre-in "}),d=e.events,f=this,g=f.element,i=b.createElement("div");i.classList.add(k.background),i.appendChild(g.parentElement.replaceChild(i,g)),g.classList.contains(k.toast)&&i.addEventListener("click",f.closePopup,!1),f.background=i,f.trigger(d.before_show),f._transition(c,function(){f._setActive(!0),f.trigger(d.show)})},j.close=function(a){var b=h.multiMerge({},a,{ext:" in ui-pre-in "}),c=e.events,d=this,f=d.element,g=d.background,i=g.parentElement;f.classList.contains(k.toast)&&g.removeEventListener("click",d.closePopup,!1),i&&(i.appendChild(f),i.removeChild(g)),g=null,d.trigger(c.before_hide),d._transition(b,function(){d._setActive(!1),d.trigger(c.hide)})},j._transition=function(b,c){var d=this,e=b.transition||d.options.transition||"",f=e+b.ext,h=d.element,i=h.classList,j=g.getRouter().getContainer().element,k={resolve:c},l=function(){h.removeEventListener("animationend",l,!1),h.removeEventListener("webkitAnimationEnd",l,!1),j.classList.remove("ui-viewport-transitioning"),f.split(" ").forEach(function(a){var b=a.trim();b.length>0&&i.remove(b)}),k.resolve()};return"none"!==e?(h.addEventListener("animationend",l,!1),h.addEventListener("webkitAnimationEnd",l,!1),j.classList.add("ui-viewport-transitioning"),f.split(" ").forEach(function(a){var b=a.trim();b.length>0&&i.add(b)})):a.setTimeout(k.resolve,0),k},h.inherit(e,f,j),g.defineWidget("popup","",".ui-popup",["setActive","show","hide","open","close"],e,"micro"),d.widget.micro.Popup=e}(a,a.document,a.screen,d),function(b,c){var d=c.widget.BaseWidget,e=(c.widget.micro.Page,c.utils),f=e.object,g=e.DOM,h=c.engine,i={uiViewportTransitioning:"ui-viewport-transitioning",out:"out","in":"in",uiPreIn:"ui-pre-in"},j=function(){return this.activePage=null,this},k={PAGE_CHANGE:"pagechange"},l="animationend",m="webkitAnimationEnd",n={};j.events=k,n.change=function(a,b){var c,d=this,e=d.getActivePage();b=b||{},a.parentNode!==d.element&&d._include(a),c=h.instanceWidget(a,"page"),e&&e.element===a||(d._include(a),e&&e.onBeforeHide(),c.onBeforeShow()),b.deferred={resolve:function(){e&&(e.onHide(),d._removeExternalPage(e,b)),c.onShow(),d.trigger(k.PAGE_CHANGE)}},d._transition(c,e,b)},n._transition=function(b,c,d){var e,f,g,h,j=this.element,k=j.classList,n=c&&d.transition?d.transition:"none",o=d.deferred,p="reverse",q=[i.in,i.out,i.uiPreIn,n];d.reverse&&q.push(p),k.add(i.uiViewportTransitioning),e=o.resolve,o.resolve=function(){var a,d=q.length,f=c&&c.element.classList,g=b.element.classList;for(k.remove(i.uiViewportTransitioning),a=0;d>a;a++)f&&f.remove(q[a]),g.remove(q[a]);e()},"none"!==n?(f=d.reverse?c:b,h=function(){f.element.removeEventListener(l,h,!1),f.element.removeEventListener(m,h,!1),o.resolve()},f.element.addEventListener(l,h,!1),f.element.addEventListener(m,h,!1),c&&(g=c.element.classList,g.add(n),g.add(i.out),d.reverse&&g.add(p)),g=f.element.classList,g.add(n),g.add(i.in),d.reverse&&g.add(p),this._setActivePage(f)):(this._setActivePage(b),a.setTimeout(o.resolve,0))
},n._include=function(a){var b=this.element;a.parentNode!==b&&b.appendChild(a)},n._setActivePage=function(a){var b=this;b.activePage&&b.activePage.setActive(!1),b.activePage=a,a.setActive(!0)},n.getActivePage=function(){return this.activePage},n.showLoading=function(){return null},n.hideLoading=function(){return null},n._removeExternalPage=function(a,b){var c=a.element;b=b||{},b.reverse&&g.hasNSData(c,"external")&&(a.destroy(),c.parentNode.removeChild(c))},f.inherit(j,d,n),c.widget.micro.PageContainer=j,h.defineWidget("pagecontainer","./widget/ns.widget.micro.PageContainer","",["change","getActivePage","showLoading","hideLoading"],j,"micro")}(a.document,d),function(a,b){b.widget.micro.indexscrollbar=b.widget.micro.indexscrollbar||{}}(a,d),function(a,b){function c(a,b){return this.element=a,this.options=d.multiMerge(b,this._options,!1),this.container=this.options.container,this.indices={original:this.options.index,merged:[]},this._init(),this}var d=b.utils.object,e=b.utils.DOM;c.prototype={_options:{container:null,offsetLeft:0,index:[],verticalCenter:!1,moreChar:"*",indexHeight:36,selectedClass:"ui-state-selected",ulClass:null},_init:function(){this.indices.original=this.options.index,this.maxIndexLen=0,this.indexLookupTable=[],this.indexElements=null,this.selectedIndex=-1,this._setMaxIndexLen(),this._makeMergedIndices(),this._drawDOM(),this._appendToContainer(),this.options.verticalCenter&&this._adjustVerticalCenter(),this._setIndexCellInfo()},_clear:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.indices.merged.length=0,this.indexLookupTable.length=0,this.indexElements=null,this.selectedIndex=-1},refresh:function(){this._clear(),this._init()},destroy:function(){this._clear(),this.element=null},show:function(){this.element.style.visibility="visible"},hide:function(){this.element.style.visibility="hidden"},_setMaxIndexLen:function(){var a,b=this.container.offsetHeight;a=Math.floor(b/this.options.indexHeight),a>0&&a%2===0&&(a-=1),this.maxIndexLen=a},_makeMergedIndices:function(){var a,b,c=this.indices.original,d=c.length,e=Math.min(this.maxIndexLen,d),f=d-e,g=parseInt(f/parseInt(e/2,10),10),h=f%parseInt(e/2,10),i=[],j=[],k=0;for(a=0,b=e;b>a;a++)i[a]=1,a%2&&(i[a]+=g+(h-->0?1:0)),k+=i[a],j.push({start:k-1,length:i[a]});this.indices.merged=j},_drawDOM:function(){var b,c,d,e,f,g=this.indices.original,h=this.indices.merged,i=h.length,j=this.options.indexHeight,k=this.options.moreChar,l=9;for(c=a.createDocumentFragment(),e=0;i>e;e++)f=h[e],b=1===f.length?g[f.start]:k,d=a.createElement("li"),d.innerText=b.toUpperCase(),d.style.height=j+"px",d.style.lineHeight=b===k?j+l+"px":j+"px",c.appendChild(d);this.element.appendChild(c),this.options.ulClass&&this.element.classList.add(this.options.ulClass)},_adjustVerticalCenter:function(){var a=this.indices.merged.length,b=a*this.options.indexHeight,c=parseInt((this.container.offsetHeight-b)/2,10);this.element.style.paddingTop=c+"px"},_appendToContainer:function(){this.container.appendChild(this.element),this.element.style.left=this.options.offsetLeft+"px"},setPaddingTop:function(a){var b=this.element.clientHeight,c=this.element.style.paddingTop,d=this.element.style.paddingBottom,e=this.container.clientHeight;c=""===c?0:parseInt(c,10),d=""===d?0:parseInt(d,10),b=b-c-d,a+b>e&&(a-=a+b-e),this.element.style.paddingTop=a+"px",this._setIndexCellInfo()},getOffsetTopByIndex:function(a){var b=this.indexLookupTable[a].cellIndex,c=this.indexElements[b],d=c.offsetTop;return d},_setIndexCellInfo:function(){var a=this.element,b=this.indices.merged,c=e.getElementOffset(this.container).top,d=this.element.querySelectorAll("LI"),f=[];[].forEach.call(d,function(a,d){for(var e=b[d],g=e.start,h=g+e.length,i=c+a.offsetTop,j=a.offsetHeight/e.length;h>g;g++)f.push({cellIndex:d,top:i,range:j}),i+=j}),this.indexLookupTable=f,this.indexElements=a.children},getIndexByPosition:function(a){var b,c,d,e,f=this.indexLookupTable;if(f[0]&&(b=f[0],a<b.top))return 0;if(f[f.length-1]&&(b=f[f.length-1],a>=b.top+b.range))return f.length-1;for(c=0,d=f.length;d>c;c++)if(b=f[c],e=a-b.top,e>=0&&e<b.range)return c;return 0},getValueByIndex:function(a){return 0>a&&(a=0),this.indices.original[a]},select:function(a){var b,c;this.clearSelected(),this.selectedIndex!==a&&(this.selectedIndex=a,b=this.indexLookupTable[a].cellIndex,c=this.indexElements[b],c.classList.add(this.options.selectedClass))},clearSelected:function(){var a=this.element,b=this.options.selectedClass,c=a.querySelectorAll("."+b);[].forEach.call(c,function(a){a.classList.remove(b)}),this.selectedIndex=-1}},b.widget.micro.indexscrollbar.IndexBar=c}(a.document,d),function(b,c){function d(a,b){return this.element=a,this.options=e.multiMerge(b,this._options,!1),this.value=null,this._init(),this}var e=c.utils.object;d.prototype={_options:{className:"ui-indexscrollbar-indicator",selectedClass:"ui-selected",container:null},_init:function(){var a=this.element;a.className=this.options.className,a.innerHTML="<span></span>",this.options.container.appendChild(a),this.fitToContainer()},fitToContainer:function(){var b=this.element,c=this.options.container,d=a.getComputedStyle(c).position;b.style.width=c.offsetWidth+"px",b.style.height=c.offsetHeight+"px","absolute"!==d&&"relative"!==d&&(b.style.top=c.offsetTop+"px",b.style.left=c.offsetLeft+"px")},setValue:function(a){this.value=a,a=a.toUpperCase();var b=a.substr(a.length-1),c=a.substr(0,a.length-1),d="<span>"+c+'</span><span class="ui-selected">'+b+"</span>";this.element.firstChild.innerHTML=d},show:function(){this.element.style.display="block"},hide:function(){this.element.style.display="none"},destroy:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element=null}},c.widget.micro.indexscrollbar.IndexIndicator=d}(a.document,d),function(b,c){var d=function(){this.element=null,this.indicator=null,this.indexBar1=null,this.indexBar2=null,this.index=null,this.touchAreaOffsetLeft=0,this.indexElements=null,this.selectEventTriggerTimeoutId=null,this.ulMarginTop=0,this.eventHandlers={}},e=c.widget.BaseWidget,f=c.engine,g=(c.utils.events,c.utils.DOM,new e,c.utils.object),h=c.widget.micro.indexscrollbar.IndexBar,i=c.widget.micro.indexscrollbar.IndexIndicator;g.inherit(d,e,{widgetName:"IndexScrollbar",widgetClass:"ui-indexscrollbar",_configure:function(){this.options={moreChar:"*",selectedClass:"ui-state-selected",delimeter:",",index:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1"],maxIndexLen:0,indexHeight:36,keepSelectEventDelay:50,container:null,supplementaryIndex:null,supplementaryIndexMargin:1}},_build:function(a,b){return b},_init:function(){this._setInitialLayout(),this._createSubObjects(),this._updateLayout(),this._extended(!0)},_refresh:function(){this._isExtended()&&(this._unbindEvent(),this.indicator.hide(),this._extended(!1)),this._updateLayout(),this._extended(!0)},_destroy:function(){this.isBound()&&(this._unbindEvent(),this._extended(!1),this._destroySubObjects(),this.element=null,this.indicator=null,this.index=null,this.eventHandlers={})},_setOptions:function(a){a=a||{},this.options=c.utils.object.multiMerge(a,this._options,!1),this.options.index=this._getIndex()},_createSubObjects:function(){this.indexBar1=new h(b.createElement("UL"),{container:this.element,offsetLeft:0,index:this.options.index,verticalCenter:!0,indexHeight:this.options.indexHeight}),this.options.supplementaryIndex&&(this.indexBar2=new h(b.createElement("UL"),{container:this.element,offsetLeft:-this.element.clientWidth-this.options.supplementaryIndexMargin,index:[],indexHeight:this.options.indexHeight,ulClass:"ui-indexscrollbar-supplementary"}),this.indexBar2.hide()),this.indicator=new i(b.createElement("DIV"),{container:this._getContainer()})},_destroySubObjects:function(){var a,b,c,d={iBar1:this.indexBar1,iBar2:this.indexBar2,indicator:this.indicator};for(c in d)a=d[c],a&&(b=a.element,a.destroy(),b.parentNode.removeChild(b))},_setInitialLayout:function(){var b=this.element,c=this._getContainer(),d=a.getComputedStyle(c).position;"absolute"!==d&&"relative"!==d&&(b.style.top=c.offsetTop+"px",b.style.height=c.style.height)},_setMaxIndexLen:function(){var a=this.options.maxIndexLen,b=this._getContainer(),c=b.offsetHeight;0>=a&&(a=Math.floor(c/this.options.indexHeight)),a>0&&a%2===0&&(a-=1),this.options.maxIndexLen=a},_updateLayout:function(){this._setInitialLayout(),this._draw(),this.touchAreaOffsetLeft=this.element.offsetLeft-10},_draw:function(){return this.indexBar1.show(),this},_removeIndicator:function(){var a=this.indicator,b=a.element.parentNode;b.removeChild(a.element),a.destroy(),this.indicator=null},_getEventReceiverByPosition:function(b){var c,d=a.innerWidth,e=this.element.clientWidth;return c=this.options.supplementaryIndex?b>=d-e&&d>=b?this.indexBar1:this.indexBar2:this.indexBar1},_updateIndicatorAndTriggerEvent:function(b){this.indicator.setValue(b),this.indicator.show(),this.selectEventTriggerTimeoutId&&a.clearTimeout(this.selectEventTriggerTimeoutId),this.selectEventTriggerTimeoutId=a.setTimeout(function(){this._trigger(this.element,"select",{index:b}),this.selectEventTriggerTimeoutId=null}.bind(this),this.options.keepSelectEventDelay)},_onTouchStartHandler:function(a){if(a.touches.length>1)return a.preventDefault(),a.stopPropagation(),void 0;var b=this._getPositionFromEvent(a),c=this.indexBar1,d=c.getIndexByPosition(b.y),e=c.getValueByIndex(d);c.select(d),this._updateIndicatorAndTriggerEvent(e)},_onTouchMoveHandler:function(a){if(a.touches.length>1)return a.preventDefault(),a.stopPropagation(),void 0;var b,c,d,e=this._getPositionFromEvent(a),f=this.indexBar1,g=this.indexBar2;c=this._getEventReceiverByPosition(e.x),c===g&&(g.options.index=this.options.supplementaryIndex(f.getValueByIndex(f.selectedIndex)),g.refresh()),b=c.getIndexByPosition(e.y),d=c.getValueByIndex(b),c===g&&(d=f.getValueByIndex(f.selectedIndex)+d,g.setPaddingTop(f.getOffsetTopByIndex(f.selectedIndex))),c.select(b),c.show(),f===c&&g&&g.hide(),this._updateIndicatorAndTriggerEvent(d),a.preventDefault(),a.stopPropagation()},_onTouchEndHandler:function(a){a.touches.length>0||(this.indicator.hide(),this.indexBar1.clearSelected(),this.indexBar2&&(this.indexBar2.clearSelected(),this.indexBar2.hide()))},_bindEvents:function(){this._bindResizeEvent(),this._bindEventToTriggerSelectEvent()},_unbindEvent:function(){this._unbindResizeEvent(),this._unbindEventToTriggerSelectEvent()},_bindResizeEvent:function(){this.eventHandlers.onresize=function(){this.refresh()}.bind(this),a.addEventListener("resize",this.eventHandlers.onresize)},_unbindResizeEvent:function(){this.eventHandlers.onresize&&a.removeEventListener("resize",this.eventHandlers.onresize)},_bindEventToTriggerSelectEvent:function(){this.eventHandlers.touchStart=this._onTouchStartHandler.bind(this),this.eventHandlers.touchEnd=this._onTouchEndHandler.bind(this),this.eventHandlers.touchMove=this._onTouchMoveHandler.bind(this),this.element.addEventListener("touchstart",this.eventHandlers.touchStart),this.element.addEventListener("touchmove",this.eventHandlers.touchMove),b.addEventListener("touchend",this.eventHandlers.touchEnd),b.addEventListener("touchcancel",this.eventHandlers.touchEnd)},_unbindEventToTriggerSelectEvent:function(){this.element.removeEventListener("touchstart",this.eventHandlers.touchStart),this.element.removeEventListener("touchmove",this.eventHandlers.touchMove),b.removeEventListener("touchend",this.eventHandlers.touchEnd),b.removeEventListener("touchcancel",this.eventHandlers.touchEnd)},_trigger:function(a,b,c){var d;if(!a||!a.nodeType||1!==a.nodeType)throw"Given element is not a valid DOM element";if("string"!=typeof b||b.length<=0)throw"Given eventName is not a valid string";return d=new CustomEvent(b,{detail:c,bubbles:!0,cancelable:!0}),a.dispatchEvent(d),!0},_data:function(a,b){var c,d=this.element,e=d.__data;if(e||(e=d.__data={}),"object"==typeof a){for(c in a)this._data(c,a[c]);return this}return"undefined"==typeof b?e[a]:(e[a]=b,this)},_isValidElement:function(a){return a.classList.contains(this.widgetClass)},_isExtended:function(){return!!this._data("extended")},_extended:function(a){return this._data("extended",a),this},_getIndex:function(){var a=this.element,b=this.options,c=a.getAttribute("data-index");return c=c?c.split(b.delimeter):b.indices},_getOffset:function(a){var b=0,c=0;do c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;while(a);return{top:c,left:b}},_getContainer:function(){return this.options.container||this.element.parentNode},_getPositionFromEvent:function(a){return-1!==a.type.search(/^touch/)?{x:a.touches[0].clientX,y:a.touches[0].clientY}:{x:a.clientX,y:a.clientY}},addEventListener:function(a,b){this.element.addEventListener(a,b)},removeEventListener:function(a,b){this.element.removeEventListener(a,b)}}),c.widget.micro.IndexScrollbar=d,f.defineWidget("IndexScrollbar","",".ui-indexscrollbar",[],d,"micro")}(a.document,d),function(b,c){function d(a){for(var b=a.element.children,c=b.length;--c>=0;)b[c].classList.remove(A.classes.uiListviewActive)}function e(b,c){var e=c.changedTouches[0];"touchmove"===c.type?Math.abs(z.clientX-e.clientX)>10&&Math.abs(z.clientY-e.clientY)>10&&(d(b),a.clearTimeout(m)):(d(b),a.clearTimeout(m))}function f(a){var b;b="LI"===n.tagName?n:n.parentNode,n.removeEventListener("touchmove",y,!1),n.removeEventListener("touchend",y,!1),y=null,d(a),b.classList.add(A.classes.uiListviewActive),z={}}function g(b,c){n=c.target,a.clearTimeout(m),n.removeEventListener("touchmove",y,!1),n.removeEventListener("touchend",y,!1),m=a.setTimeout(f.bind(null,b),x),z.clientX=c.touches[0].clientX,z.clientY=c.touches[0].clientY,y=e.bind(null,b),n.addEventListener("touchmove",y,!1),n.addEventListener("touchend",y,!1)}function h(a){var b=a._scroll,c=b.direction,d=a.ui.scrollview,e=b.lastPositionX,f=b.lastPositionY,g=d.scrollLeft,h=d.scrollTop;a._refreshScrollbar(),c=[0,0,0,0],f>h&&(c[q]=1),e>g&&(c[r]=1),h>f&&(c[s]=1),g>e&&(c[t]=1),b.lastJumpY=Math.abs(h-f),b.lastJumpX=Math.abs(g-e),b.lastPositionX=g,b.lastPositionY=h,b.direction=c,b.clipHeight=d.clientHeight,b.clipWidth=d.clientWidth}function i(a,b){return parseInt(b===u?a.clientHeight:a.clientWidth,10)+1}function j(a,b){var c,d,e=a.element,f=a.options,g=a._scroll,h=0,j=f.dataLength,k=0,l=0,m=0,n=f.bufferSize,o=0;for(h=f.orientation===u?g.clipHeight:g.clipWidth,m=i(e,f.orientation)/n,l=Math.floor((n-Math.floor(h/m))/2),0>=b-l?(d=0,k=0):d=b-l,d+n>=j&&(d=j-n),k=b-d,a._loadData(d),w=!0,o=d*m,f.orientation===u?e.style.top=o+"px":e.style.left=o+"px",c=0;k>c;c+=1)o+=i(e.children[c],f.orientation);f.orientation===u?a.ui.scrollview.scrollTop=o:a.ui.scrollview.scrollLeft=o,w=!1,a._currentIndex=d}function k(a){var b,c,d=a.element,e=a._scroll,f=a.options,g=d.style,h=a._currentIndex,i=parseInt(f.bufferSize,10),j=f.dataLength,k=e.direction,l=e.clipWidth,m=e.clipHeight,n=e.lastPositionY,o=e.lastPositionX,p=parseInt(g.top,10)||0,v=parseInt(g.left,10)||0,w=0,x=0,y=0,z=null,A=0,B=0,C=0,D=0,E=0;for(b=d.children,C=b.length-1;C>0;C-=1)B+=f.orientation===u?b[C].clientHeight:b[C].clientWidth;if(A=B/f.bufferSize,k[s]&&(E=n-p,y=j-h-i),k[q]&&(E=p+B-(n+m),y=h),k[r]&&(E=o-v,y=j-h-i),k[t]&&(E=v+B-(o-l),y=h),E>0&&1.5>=B/E){for(w=Math.floor(E/A)-Math.floor((i-m/A)/2),w=w>y?y:w,x=Math.floor(w/i),w%=i,x>0&&(a._loadData(h+x*i),(k[s]||k[r])&&((k[s]||k[r])&&(D+=x*i*A),(k[q]||k[t])&&(D-=x*i*A))),(k[s]||k[r])&&(h=h+i-1),C=w;C>0;C-=1)(k[s]||k[r])&&(z=d.appendChild(d.firstElementChild),++h,a._updateListItem(z,h),D+=z.clientHeight),(k[q]||k[t])&&(z=d.insertBefore(d.lastElementChild,d.firstElementChild),--h,a._updateListItem(z,h),D-=z.clientHeight);(k[q]||k[s])&&(c=p+D,(0>c||0>=h)&&(c=0,h=0),g.top=c+"px"),(k[t]||k[r])&&(c=v+D,(0>c||0>=h)&&(c=0),g.left=c+"px"),(k[s]||k[r])&&(h=h-i+1),a._currentIndex=h}}function l(a){var b=a._scroll;h.call(null,a),(b.lastJumpY>0||b.lastJumpX>0)&&(w||k(a))}var m,n,o=c.widget.BaseWidget,p=c.engine,q=(c.utils.events,0),r=1,s=2,t=3,u="y",v="x",w=!1,x=250,y=null,z={},A=function(){var a=this;return a.ui={scrollview:null,spacer:null,itemSize:0},a._scroll={direction:[0,0,0,0],lastPositionX:0,lastPositionY:0,lastJumpX:0,lastJumpY:0,clipWidth:0,clipHeight:0},a.name="VirtualListview",a._currentIndex=0,a.options={bufferSize:100,dataLength:0,orientation:u,listItemUpdater:null},a._scrollEventBound=null,a._touchStartEventBound=null,a},B=new o;A.classes={uiVirtualListContainer:"ui-virtual-list-container",uiListviewActive:"ui-listview-active"},B._updateListItem=function(a,b){this.options.listItemUpdater(a,b)},B._build=function(a,b){var c=A.classes;return b.classList.add(c.uiVirtualListContainer),b},B._init=function(a){var c,d,e,f,g,h=this,i=h.ui,j=h.options;c=j.orientation.toLowerCase()===v?v:u,d=a.parentElement,e=d.style,f=b.createElement("div"),g=f.style,g.display="block",g.position="static",d.appendChild(f),a.style.position="relative",c===v?(g.float="left",e.overflowX="scroll",e.overflowY="hidden"):(e.overflowX="hidden",e.overflowY="scroll"),j.dataLength<j.bufferSize&&(j.bufferSize=j.dataLength-1),j.bufferSize<1&&(j.bufferSize=1),i.spacer=f,i.scrollview=d,h.element=a,j.orientation=c},B._buildList=function(){var a,c,d=this.element,e=this.options.bufferSize,f=b.createDocumentFragment(),h=g.bind(null,this),i=this.options.orientation;for(c=0;e>c;++c)a=b.createElement("li"),i===v&&(a.style.float="left"),this._updateListItem(a,c),f.appendChild(a),a.addEventListener("touchstart",h,!1);d.appendChild(f),this._touchStartEventBound=h,this._refresh()},B._refresh=function(){this._refreshScrollbar()},B._loadData=function(a){var b=this.element.firstElementChild;if(this._currentIndex!==a){this._currentIndex=a;do this._updateListItem(b,a),++a,b=b.nextElementSibling;while(b)}},B._refreshScrollbar=function(){var a,b=this,c=b.element,d=b.options,e=b.ui,f=e.spacer.style;d.orientation===u?(a=parseFloat(c.clientHeight)||0,f.height=a/d.bufferSize*(d.dataLength-1)-4/3*a+"px"):(a=parseFloat(c.clientWidth)||0,f.width=a/d.bufferSize*(d.dataLength-1)-4/3*a+"px")},B._bindEvents=function(){var a=l.bind(null,this),b=this.ui.scrollview;b&&(b.addEventListener("scroll",a,!1),this._scrollEventBound=a)},B._destroy=function(){var a,b=this,c=b.ui.scrollview,d=b.ui.spacer,e=b.element,f=e.style;for(f.position="static",b.options.orientation===u?f.top="auto":f.left="auto",c&&c.removeEventListener("scroll",b._scrollEventBound,!1),d.parentNode&&d.parentNode.removeChild(d);e.firstElementChild;)a=e.firstElementChild,a.removeEventListener("touchstart",b._touchStartEventBound,!1),e.removeChild(a)},B.scrollTo=function(a){this.ui.scrollview.scrollTop=a},B.scrollToIndex=function(a){0>a&&(a=0),a>=this.options.dataLength&&(a=this.options.dataLength-1),h(this),j(this,a)},B.draw=function(){this._buildList(),this.trigger("draw")},B.setListItemUpdater=function(a){this.options.listItemUpdater=a},A.prototype=B,c.widget.micro.VirtualListview=A,p.defineWidget("VirtualListview","","",["draw","setListItemUpdater","getTopByIndex","scrollTo","scrollToIndex"],A,"micro")}(a.document,d),function(a,b){b.widget.micro.scroller=b.widget.micro.scroller||{}}(a,d),function(a,b){b.widget.micro.scroller.effect=b.widget.micro.scroller.effect||{}}(a,d),function(){}(a.document,d),function(b,c){var d=c.widget.BaseWidget,e=c.engine,f=c.utils.object,g=new d,h=c.widget.micro.scroller.effect.Bouncing,i={START:"scrollstart",END:"scrollend",CANCEL:"scrollcancel"},j=function(){};j.Orientation={VERTICAL:1,HORIZONTAL:2},g._build=function(a,b){if(1!==b.children.length)throw"scroller has only one child.";return this.scroller=b.children[0],this.scrollerStyle=this.scroller.style,this.bouncingEffect=null,this.scrollbar=null,this.width=0,this.height=0,this.scrollerWidth=0,this.scrollerHeight=0,this.scrollerOffsetX=0,this.scrollerOffsetY=0,this.maxScrollX=0,this.maxScrollY=0,this.startTouchPointX=0,this.startTouchPointY=0,this.startScrollerOffsetX=0,this.startScrollerOffsetY=0,this.lastVelocity=0,this.lastEstimatedPoint=0,this.lastTouchPointX=-1,this.lastTouchPointY=-1,this.orientation=null,this.initiated=!1,this.enabled=!0,this.scrolled=!1,this.moved=!1,this.scrollCanceled=!1,this.startTime=null,b},g._configure=function(){this.options=f.multiMerge({},this.options,{scrollDelay:300,threshold:10,minThreshold:5,flickThreshold:30,scrollbar:!1,useBouncingEffect:!1,orientation:"vertical",momentum:!0})},g._init=function(){this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.width-this.scrollerWidth,this.maxScrollY=this.height-this.scrollerHeight,this.orientation="horizontal"===this.options.orientation?j.Orientation.HORIZONTAL:j.Orientation.VERTICAL,this.initiated=!1,this.scrolled=!1,this.moved=!1,this.touching=!0,this.scrollCanceled=!1,this.orientation===j.Orientation.HORIZONTAL?(this.maxScrollY=0,this.scrollerHeight=this.height):(this.maxScrollX=0,this.scrollerWidth=this.width),this._initLayout(),this._initScrollbar(),this._initBouncingEffect()},g._initLayout=function(){var a=this.element.style,b=this.scroller.style;a.overflow="hidden",a.position="relative",b.position="absolute",b.top="0px",b.left="0px",b.width=this.scrollerWidth+"px",b.height=this.scrollerHeight+"px"},g._initScrollbar=function(){var a,c=this.options.scrollbar;for(this.scrollbarelement=b.createElement("div"),a=0;a<this.element.children.length;a++)this.scrollbarelement.appendChild(this.element.children[a]);this.element.appendChild(this.scrollbarelement),c&&(this.scrollbar=e.instanceWidget(this.scrollbarelement,"Scrollbar",{type:c,orientation:this.orientation}))},g._initBouncingEffect=function(){var a=this.options;a.useBouncingEffect&&(this.bouncingEffect=new h(this.element,{maxScrollX:this.maxScrollX,maxScrollY:this.maxScrollY,orientation:this.orientation}))},g._resetLayout=function(){var a=this.element.style;a.overflow="",a.position=""},g._bindEvents=function(){"ontouchstart"in a?(this.scroller.addEventListener("touchstart",this),this.scroller.addEventListener("touchmove",this),this.scroller.addEventListener("touchend",this),this.scroller.addEventListener("touchcancel",this)):(this.scroller.addEventListener("mousedown",this),b.addEventListener("mousemove",this),b.addEventListener("mouseup",this),b.addEventListener("mousecancel",this)),a.addEventListener("resize",this)},g._unbindEvents=function(){"ontouchstart"in a?(this.scroller.removeEventListener("touchstart",this),this.scroller.removeEventListener("touchmove",this),this.scroller.removeEventListener("touchend",this),this.scroller.removeEventListener("touchcancel",this)):(this.scroller.removeEventListener("mousedown",this),b.removeEventListener("mousemove",this),b.removeEventListener("mouseup",this),b.removeEventListener("mousecancel",this)),a.removeEventListener("resize",this)},g.handleEvent=function(a){var b=this._getPointPositionFromEvent(a);switch(a.type){case"mousedown":a.preventDefault();case"touchstart":this._start(a,b);break;case"mousemove":a.preventDefault();case"touchmove":this._move(a,b);break;case"mouseup":case"touchend":this._end(a,b);break;case"mousecancel":case"touchcancel":this.cancel(a);break;case"resize":this.refresh()}},g.setOptions=function(a){var b;for(b in a)a.hasOwnProperty(b)&&a[b]&&(this.options[b]=a[b])},g._refresh=function(){this._clear(),this._init()},g.scrollTo=function(a,b,c){this._translate(a,b,c),this._translateScrollbar(a,b,c)},g._translate=function(b,c,d){var e,f,g=this.scrollerStyle;f=d?"-webkit-transform "+d/1e3+"s ease-out":"none",e="translate3d("+b+"px,"+c+"px, 0)",this.scrollerOffsetX=a.parseInt(b,10),this.scrollerOffsetY=a.parseInt(c,10),g["-webkit-transform"]=e,g["-webkit-transition"]=f},g._translateScrollbar=function(a,b,c){this.scrollbar&&this.scrollbar.translate(this.orientation===j.Orientation.HORIZONTAL?-a:-b,c)},g._getEstimatedCurrentPoint=function(a,b){var c,d,e=15;return b===a?(this.lastVelocity=0,this.lastEstimatedPoint=a,a):(c=(a-b)/22,d=a+e*c,this.lastVelocity*c>=0&&(!c||0>c&&d>this.lastEstimatedPoint||c>0&&d<this.lastEstimatedPoint)&&(d=this.lastEstimatedPoint),this.lastVelocity=c,this.lastEstimatedPoint=d,d)},g._getPointPositionFromEvent=function(a){return-1!==a.type.search(/^touch/)&&a.touches&&a.touches.length?{x:a.touches[0].clientX,y:a.touches[0].clientY}:{x:a.clientX,y:a.clientY}},g._start=function(a,b){!this.initiated&&this.enabled&&(this.startTime=(new Date).getTime(),this.startTouchPointX=b.x,this.startTouchPointY=b.y,this.startScrollerOffsetX=this.scrollerOffsetX,this.startScrollerOffsetY=this.scrollerOffsetY,this.lastTouchPointX=b.x,this.lastTouchPointY=b.y,this.initiated=!0,this.scrollCanceled=!1,this.scrolled=!1,this.moved=!1,this.touching=!0)},g._move=function(a,b){var c,d,e=(new Date).getTime(),f=this.options.scrollDelay||0,g=this.options.threshold||0,h=this.options.minThreshold||0,k=this.startTouchPointX-b.x,l=this.startTouchPointY-b.y,m=Math.abs(k),n=Math.abs(l),o=Math.max(m,n);if(this.initiated&&this.touching&&!this.scrollCanceled&&(this.lastTouchPointX=b.x,this.lastTouchPointY=b.y,this.scrolled||!(h>o||g>o&&(!f||e-this.startTime<f)))){if(!this.scrolled){switch(this.orientation){case j.Orientation.HORIZONTAL:if(n>m)return this.cancel(),void 0;break;case j.Orientation.VERTICAL:if(m>n)return this.cancel(),void 0}this._fireEvent(i.START),this.startTouchPointX=b.x,this.startTouchPointY=b.y}this.scrolled=!0,this.orientation===j.Orientation.HORIZONTAL?(c=this.startScrollerOffsetX+this._getEstimatedCurrentPoint(b.x,this.lastTouchPointX)-this.startTouchPointX,d=this.startScrollerOffsetY):(c=this.startScrollerOffsetX,d=this.startScrollerOffsetY+this._getEstimatedCurrentPoint(b.y,this.lastTouchPointY)-this.startTouchPointY),(c>0||c<this.maxScrollX)&&(c=c>0?0:this.maxScrollX),(d>0||d<this.maxScrollY)&&(d=d>0?0:this.maxScrollY),c!==this.scrollerOffsetX||d!==this.scrollerOffsetY?(this.moved=!0,this._translate(c,d),this._translateScrollbar(c,d),this.bouncingEffect&&this.bouncingEffect.hide()):this.bouncingEffect&&this.bouncingEffect.drag(c,d),a.preventDefault()}},g._end=function(a){var b,c,d=Math.round(this.lastTouchPointX),e=Math.round(this.lastTouchPointY),f=Math.abs(d-this.startTouchPointX),g=Math.abs(e-this.startTouchPointY),h=this.orientation===j.Orientation.HORIZONTAL?f:g,i=this.orientation===j.Orientation.HORIZONTAL?this.maxScrollX:this.maxScrollY,k=this.orientation===j.Orientation.HORIZONTAL?this.scrollerOffsetX:this.scrollerOffsetY,l=this.initiated&&this.scrolled;return this.touching=!1,!l||this.scrollCanceled?(this.initiated=!1,void 0):(this.bouncingEffect&&this.bouncingEffect.dragEnd(),this.moved?(b=(new Date).getTime(),c=b-this.startTime,this.options.momentum&&300>c&&0>k&&k>i&&h>this.options.flickThreshold?this._startMomentumScroll():this._endScroll(),a.preventDefault(),void 0):(this._endScroll(),void 0))},g._endScroll=function(){this.scrolled&&this._fireEvent(i.END),this.moved=!1,this.scrolled=!1,this.scrollCanceled=!1,this.initiated=!1},g.cancel=function(){this.scrollCanceled=!0,this.initiated&&(this._translate(this.startScrollerOffsetX,this.startScrollerOffsetY),this._translateScrollbar(this.startScrollerOffsetX,this.startScrollerOffsetY),this._fireEvent(i.CANCEL)),this.initiated=!1,this.scrolled=!1,this.moved=!1,this.touching=!1},g._startMomentumScroll=function(){this._endMomentumScroll()},g._endMomentumScroll=function(){this._endScroll()},g._fireEvent=function(a,b){var c=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:b});this.element.dispatchEvent(c)},g._clear=function(){this.initiated=!1,this.scrolled=!1,this.moved=!1,this.scrollCanceled=!1,this.touching=!1,this._resetLayout(),this._clearScrollbar(),this._clearBouncingEffect()},g._clearScrollbar=function(){this.scrollbar&&this.scrollbar.destroy(),this.scrollbar=null},g._clearBouncingEffect=function(){this.bouncingEffect&&this.bouncingEffect.destroy(),this.bouncingEffect=null},g._disable=function(){this.element.setAttribute("disabled","disabled"),this.enabled=!1},g._enable=function(){this.element.removeAttribute("disabled"),this.enabled=!0},g._destroy=function(){this._clear(),this._unbindEvents(),this.scrollerStyle=null,this.scroller=null},j.prototype=g,c.widget.micro.scroller.Scroller=j,e.defineWidget("Scroller","",".scroller",[],j)}(a.document,d),function(b,c){function d(){this.options={}}var e=c.widget.micro.scroller.Scroller,f=c.engine,g=c.utils.object,h={CHANGE:"sectionchange"};g.inherit(d,e,{_build:function(a,b){return this.sections=null,this.sectionPositions=[],this.activeIndex=0,this._super(a,b),b},_configure:function(){this._super();var a=this.options;a.items="section",a.activeClass="section-active",a.circular=!1,a.animate=!0,a.animateDuration=100,a.orientation="horizontal",a.changeThreshold=-1},_init:function(){var a,b,c;if(this.sections="string"==typeof this.options.items?this.scroller.querySelectorAll(this.options.items):this.options.items,a=this.sections.length,this.options.circular&&3>a)throw"if you use circular option, you must have at least three sections.";for(this.activeIndex>=a&&(this.activeIndex=a-1),b=0;a>b;b++)c=this.sections[b].className,c&&c.indexOf(this.options.activeClass)>-1&&(this.activeIndex=b),this.sectionPositions[b]=b;this.setActiveSection(this.activeIndex),this._prepareLayout(),this._super(),this._repositionSections(!0),this.options.animate||(this.options.animateDuration=0),this.options.changeThreshold<0&&(this.options.changeThreshold=this.width/3),a>1?this.enable():this.disable()},_prepareLayout:function(){var a=this.sections.length,b=this.element.offsetWidth,c=this.element.offsetHeight,d="horizontal"===this.options.orientation?e.Orientation.HORIZONTAL:e.Orientation.VERTICAL,f=this.scroller.style;d===e.Orientation.HORIZONTAL?(f.width=b*a+"px",f.height=c+"px"):(f.width=b+"px",f.height=c*a+"px")},_initLayout:function(){var a,b,c,d,f=this.sections.style;for(a=0,b=this.sections.length;b>a;a++)f=this.sections[a].style,f.position="absolute",f.width=this.width+"px",f.height=this.height+"px",this.orientation===e.Orientation.HORIZONTAL?(c=0,d=this.width*a):(c=this.height*a,d=0),f.top=c+"px",f.left=d+"px";this._super()},_initScrollbar:function(){var a,c=this.options.scrollbar;for(this.scrollbarelement=b.createElement("div"),a=0;a<this.element.children.length;a++)this.scrollbarelement.appendChild(this.element.children[a]);this.element.appendChild(this.scrollbarelement),c&&(this.scrollbar=f.instanceWidget(this.scrollbarelement,"Scrollbar",{type:c,orientation:this.orientation}))},_initBouncingEffect:function(){var a=this.options;a.useBouncingEffect&&!a.circular&&(this.bouncingEffect=new e.Effect.Bouncing(this.element,{maxScrollX:this.maxScrollX,maxScrollY:this.maxScrollY,orientation:this.orientation}))},_translateScrollbar:function(a,b,c){var d,f,g;this.scrollbar&&(this.orientation===e.Orientation.HORIZONTAL?(f=this.sectionPositions[this.activeIndex]*this.width,d=this.activeIndex*this.width,g=d-f,d=-a+g):(f=this.sectionPositions[this.activeIndex]*this.height,d=this.activeIndex*this.height,g=d-f,d=-b+g),this.scrollbar.translate(d,c))},_translateScrollbarWithPageIndex:function(a,b){var c;this.scrollbar&&(c=this.orientation===e.Orientation.HORIZONTAL?a*this.width:a*this.height,this.scrollbar.translate(c,b))},_resetLayout:function(){var a,b,c=this.scroller.style,d=this.sections.style;for(c.width="",c.height="",a=0,b=this.sections.length;b>a;a++)d=this.sections[a].style,d.position="",d.width="",d.height="",d.top="",d.left="";this._super()},_bindEvents:function(){this._super(),this.scroller.addEventListener("webkitTransitionEnd",this)},_unbindEvents:function(){this._super(),this.scroller.removeEventListener("webkitTransitionEnd",this)},handleEvent:function(a){switch(this._super(a),a.type){case"webkitTransitionEnd":this._endScroll()}},setActiveSection:function(a,b){var c,d,f,g,h,i,j,k=this.options.activeClass;for(f=this.sections.length,g=this.sectionPositions[a],this.orientation===e.Orientation.HORIZONTAL?(i=0,h=-this.width*g):(i=-this.height*g,h=0),c=this.activeIndex-a>1?this.activeIndex+1:this.activeIndex-a<-1?this.activeIndex-1:a,this.activeIndex=a,j=0;f>j;j++)d=this.sections[j],d.classList.remove(k),j===this.activeIndex&&d.classList.add(k);
h!==this.scrollerOffsetX||i!==this.scrollerOffsetY?(this._translate(h,i,b),this._translateScrollbarWithPageIndex(c,b)):this._endScroll()},getActiveSectionIndex:function(){return this.activeIndex},_end:function(){var a=Math.round(this.lastTouchPointX),b=Math.round(this.lastTouchPointY),c=this.lastTouchPointX-this.startTouchPointX,d=this.lastTouchPointY-this.startTouchPointY,f=this.orientation===e.Orientation.HORIZONTAL?c:d,g=Math.abs(a-this.startTouchPointX),h=Math.abs(b-this.startTouchPointY),i=this.orientation===e.Orientation.HORIZONTAL?g:h,j=this.orientation===e.Orientation.HORIZONTAL?this.maxScrollX:this.maxScrollY,k=this.orientation===e.Orientation.HORIZONTAL?this.scrollerOffsetX:this.scrollerOffsetY,l=(new Date).getTime(),m=l-this.startTime,n=300>m&&0>=k&&k>=j&&i>this.options.flickThreshold,o=this.initiated&&(this.moved||n),p=this.sections.length,q=this.options.changeThreshold,r=!n&&q>i,s=0;return this.touching=!1,this.bouncingEffect&&this.bouncingEffect.dragEnd(),o?(s=!r&&0>f?this.activeIndex+1:!r&&f>0?this.activeIndex-1:this.activeIndex,s=this.options.circular?(p+s)%p:0>s?0:s>p-1?p-1:s,this.setActiveSection(s,this.options.animateDuration),void 0):(this._endScroll(),void 0)},_endScroll:function(){this._repositionSections(),this._fireEvent(h.CHANGE,{active:this.activeIndex}),this._super()},_repositionSections:function(b){var c,d,f,g,h,i,j,k=this.sections.length,l=this.sectionPositions[this.activeIndex],m=a.parseInt(k/2,10),n=this.options.circular;if(this.orientation===e.Orientation.HORIZONTAL?(i=-(this.width*(n?m:this.activeIndex)),j=0):(i=0,j=-(this.height*(n?m:this.activeIndex))),this._translateScrollbarWithPageIndex(this.activeIndex),(b||0===l||l===k-1)&&(this._translate(i,j),n))for(c=0;k>c;c++)f=(k+this.activeIndex-m+c)%k,d=this.sections[f].style,this.sectionPositions[f]=c,this.orientation===e.Orientation.HORIZONTAL?(g=0,h=this.width*c):(g=this.height*c,h=0),d.top=g+"px",d.left=h+"px"},_clear:function(){this._super(),this.sectionPositions.length=0}}),c.widget.micro.SectionChanger=d,f.defineWidget("SectionChanger","",".scroller",[],d)}(a.document,d),function(a,b,c){var d=c.widget.micro.VirtualListview,e=c.engine,f=c.utils.DOM,g=c.utils.object,h="x",i="y",j=function(){return this.options={bufferSize:100,dataLength:0,orientation:i,listItemUpdater:function(){return null}},this},k=new d,l=d.prototype,m=l.draw,n=l._refreshScrollbar;k.draw=function(){var a=this,c=a.element,d=a.ui,e=null,f=null;a.options.orientation===h&&(e=b.createElement("div"),f=e.style,c.parentNode.appendChild(e),e.appendChild(c),e.appendChild(d.spacer),f.width="10000px",f.height="100%",d.container=e),a._initListItem(),m.call(a)},k._refreshScrollbar=function(){var a=0,b=this.ui;n.call(this),b.container&&(a=this.element.clientWidth+b.spacer.clientWidth,b.container.style.width=a+"px")},k._initListItem=function(){var a=this,c=a.element,d=b.createElement("div"),e=b.createElement("div"),g=d.style,h=a.options.orientation,j=c.style,k=e.style;g.overflow="hidden",e.style.overflow="hidden",c.appendChild(e),e.appendChild(d),a.options.listItemUpdater(d,0),h===i?(j.overflowY="auto",j.overflowX="hidden",k.overflow="hidden",d.style.float="left",a._cellSize=f.getElementWidth(d),a._columnsCount=Math.floor(f.getElementWidth(c)/a._cellSize)):(j.overflowX="auto",j.overflowY="hidden",k.overflow="hidden",k.float="left",j.height="100%",k.height="100%",a._cellSize=f.getElementHeight(d),a._columnsCount=Math.floor(f.getElementHeight(c)/a._cellSize)),c.removeChild(e),a.options.originalDataLength=a.options.dataLength,a.options.dataLength/=a._columnsCount},k._updateListItem=function(a,c){var d,e,f,g,j,k=a.style,l=this.options;for(a.innerHTML="",k.overflow="hidden",k.position="relative",l.orientation===h&&(k.height="100%"),f=this._columnsCount,j=100/f,e=0;f>e;e++)d=b.createElement("div"),g=d.style,g.overflow="hidden",l.orientation===i?(d.style.float="left",d.style.width=j+"%"):d.style.height=j+"%",this.options.listItemUpdater(d,f*c+e),a.appendChild(d)},g.inherit(j,d,k),c.widget.micro.VirtualGrid=j,e.defineWidget("VirtualGrid","",".ui-virtualgrid",[],j)}(a,a.document,d),function(a,b){b.widget.micro.scroller.scrollbar=b.widget.micro.scroller.scrollbar||{}}(a,d),function(a,b){b.widget.micro.scroller.scrollbar.type=b.widget.micro.scroller.scrollbar.type||{}}(a,d),function(a,b){b.widget.micro.scroller.scrollbar.type.interface={insertAndDecorate:function(){},start:function(){},end:function(){},offset:function(){}}}(a.document,d),function(b,c){var d=c.utils.object,e=c.widget.micro.scroller.scrollbar.type,f=e.interface,g=c.widget.micro.scroller.Scroller;e.bar=d.multiMerge({},f,{options:{wrapperClass:"ui-scrollbar-bar-type",barClass:"ui-scrollbar-indicator",orientationClass:"ui-scrollbar-",margin:2,animationDuration:500},insertAndDecorate:function(b){var c=b.wrapper,d=b.bar,e=b.container,f=b.clip,h=b.orientation,i=this.options.margin,j=h===g.Orientation.VERTICAL?f.offsetHeight:f.offsetWidth,k=h===g.Orientation.VERTICAL?e.offsetHeight:e.offsetWidth,l=this.options.orientationClass+(h===g.Orientation.VERTICAL?"vertical":"horizontal"),m=d.style;this.containerSize=k,this.maxScrollOffset=j-k,this.scrollZoomRate=k/j,this.barSize=a.parseInt(k/(j/k))-2*i,c.className=this.options.wrapperClass+" "+l,d.className=this.options.barClass,h===g.Orientation.VERTICAL?(m.height=this.barSize+"px",m.top="0px"):(m.width=this.barSize+"px",m.left="0px"),e.appendChild(c)},offset:function(a,b){var c,d;return b=b===this.maxScrollOffset?this.containerSize-this.barSize-2*this.options.margin:b*this.scrollZoomRate,a===g.Orientation.VERTICAL?(c=0,d=b):(c=b,d=0),{x:c,y:d}},start:function(a){var b=a.style,c=this.options.animationDuration;b["-webkit-transition"]="opacity "+c/1e3+"s ease",b.opacity=1},end:function(a){var b=a.style,c=this.options.animationDuration;b["-webkit-transition"]="opacity "+c/1e3+"s ease",b.opacity=0}})}(a.document,d),function(b,c){var d=c.utils.object,e=c.widget.micro.scroller.scrollbar.type,f=e.interface,g=c.widget.micro.scroller.Scroller;e.tab=d.multiMerge({},f,{options:{wrapperClass:"ui-scrollbar-tab-type",barClass:"ui-scrollbar-indicator",margin:1},insertAndDecorate:function(b){var c,d,e,f,h=b.wrapper,i=b.bar,j=b.container,k=b.clip,l=b.sections,m=b.orientation,n=this.options.margin,o=k.offsetWidth,p=k.offsetHeight,q=j.offsetWidth,r=j.offsetHeight,s=m===g.Orientation.VERTICAL?p:o,t=m===g.Orientation.VERTICAL?r:q,u=s/t;if(this.containerSize=q,this.maxScrollOffset=s-t,this.scrollZoomRate=q/s,this.barSize=a.parseInt((q-2*n*(u-1))/u),h.className=this.options.wrapperClass,i.className=this.options.barClass,i.style.width=this.barSize+"px",i.style.left="0px",j.insertBefore(h,k),d=i.offsetHeight,c=p-d,k.style.height=c+"px",l&&l.length)for(e=0,f=l.length;f>e;e++)l[e].style.height=c+"px"},offset:function(a,b){return{x:0===b?-1:b===this.maxScrollOffset?this.containerSize-this.barSize-this.options.margin:b*this.scrollZoomRate,y:0}}})}(a.document,d),function(b,c){var d=c.widget.BaseWidget,e=c.engine,f=new d,g=c.utils.object,h=c.widget.micro.scroller.scrollbar.type,i=c.widget.micro.scroller.Scroller,j=function(){this.wrapper=null,this.barElement=null,this.container=null,this.clip=null,this.options={},this.type=null,this.maxScroll=null,this.started=!1,this.displayDelayTimeoutId=null};f._build=function(a,b){return this.container=b,this.clip=b.children[0],b},f._configure=function(){this.options=g.multiMerge({},this.options,{type:!1,displayDelay:700,sections:null,orientation:i.Orientation.VERTICAL})},f._init=function(){var a=this.options.type;if(a){if(this.type=h[a],!this.type)throw"Bad options. [type : "+this.options.type+"]";this._createScrollbar()}},f._createScrollbar=function(){var a=this.options.sections,c=this.options.orientation,d=b.createElement("DIV"),e=b.createElement("span");d.appendChild(e),this.type.insertAndDecorate({orientation:c,wrapper:d,bar:e,container:this.container,clip:this.clip,sections:a}),this.wrapper=d,this.barElement=e},f._removeScrollbar=function(){this.wrapper&&this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null,this.barElement=null},f._refresh=function(){this.clear(),this.init()},f.translate=function(b,c){var d,e,f,g,h=this.options.orientation;this.wrapper&&this.type&&(b=this.type.offset(h,b),f=this.barElement.style,e=c?"-webkit-transform "+c/1e3+"s ease-out":"none",d="translate3d("+b.x+"px,"+b.y+"px, 0)",f["-webkit-transform"]=d,f["-webkit-transition"]=e,this.started||this._start(),g=(c||0)+this.options.displayDelay,null!==this.displayDelayTimeoutId&&a.clearTimeout(this.displayDelayTimeoutId),this.displayDelayTimeoutId=a.setTimeout(this._end.bind(this),g))},f._start=function(){this.type.start(this.wrapper,this.barElement),this.started=!0},f._end=function(){this.started=!1,this.displayDelayTimeoutId=null,this.type&&this.type.end(this.wrapper,this.barElement)},f._clear=function(){this._removeScrollbar(),this.started=!1,this.type=null,this.wrapper=null,this.barElement=null,this.displayDelayTimeoutId=null},f._destroy=function(){this._clear(),this.options=null,this.container=null,this.clip=null},j.prototype=f,c.widget.micro.ScrollerScrollBar=j,e.defineWidget("Scrollbar","","",[],j)}(a.document,d),function(a,b,c){function d(a){for(;a&&("string"!=typeof a.nodeName||"a"!==a.nodeName.toLowerCase());)a=a.parentNode;return a}function e(a,b){var c,e,f,g=d(b.target);g&&1===b.which&&(c=g.getAttribute("href"),e="external"===g.getAttribute("rel")||g.hasAttribute("target"),e||(f=i.getData(g),a.open(c,f),b.preventDefault()))}function f(a,b){var c,d,e,f,g,h,i=b.state,k=p.activeState,m=n.route,o=!0;if(i){e=i.url,g="back"===p.getDirection(i),h=g?k&&k.transition||"none":i.transition,d=l.multiMerge({},i,{reverse:g,transition:h,fromHashChange:!0}),f=j.getLocation();for(c in m)m.hasOwnProperty(c)&&m[c].onHashChange(f,d)&&(o=!1);p.setActive(i),o&&a.open(e,d)}}var g=c.utils,h=g.events,i=g.DOM,j=g.path,k=g.selectors,l=g.object,m=c.engine,n=c.router.micro,o=c.micro.selectors,p=n.history,q=n.route,r=b.body,s=[].slice,t=function(){var a=this;a.activePage=null,a.firstPage=null,a.container=null,a.settings={},a.rule={}};t.prototype.defaults={fromHashChange:!1,reverse:!1,showLoadMsg:!0,loadMsgDelay:0,volatileRecord:!1},t.prototype.open=function(a,b){var c,d=b&&b.rel||"page",e=q[d],f={},g=this;if(!e)throw new Error("Not defined router rule ["+d+"]");b=l.multiMerge({rel:d},this.defaults,e.option(),b),c=e.filter,f.resolve=function(a,b){e.open(b,a)},f.reject=function(a){h.trigger(g.container.element,"changefailed",a)},"string"==typeof a?a.replace(/[#|\s]/g,"")&&this._loadUrl(a,b,e,f):a&&k.matchesSelector(a,c)?f.resolve(b,a):f.reject(b)},t.prototype.init=function(d){var e,f,g,h,j,l,n=a.location;if(r=b.body,f=c.get("pageContainer")||r,j=s.call(f.querySelectorAll(o.page)),this.justBuild=d,c.get("autoInitializePage",!0)){if(h=f.querySelector(o.activePage),h||(h=j[0]),h&&(l=f.querySelectorAll(o.activePage),s.call(l).forEach(function(a){a.classList.remove(o.activePage)}),f=h.parentNode),d)return g=m.instanceWidget(f,"pagecontainer"),h&&this.register(g,h),void 0;n.hash&&(e=b.getElementById(n.hash.replace("#","")),e&&k.matchesSelector(e,o.page)&&(h=e))}j.forEach(function(a){i.getNSData(a,"url")||i.setNSData(a,"url",a.id||n.pathname+n.search)}),g=m.instanceWidget(f,"pagecontainer"),this.register(g,h)},t.prototype.destroy=function(){a.removeEventListener("popstate",this.popStateHandler,!1),r&&(r.removeEventListener("pagebeforechange",this.pagebeforechangeHandler,!1),r.removeEventListener("click",this.linkClickHandler,!1))},t.prototype.setContainer=function(a){this.container=a},t.prototype.getContainer=function(){return this.container},t.prototype.getFirstPage=function(){return this.firstPage},t.prototype.register=function(c,d){this.container=c,this.firstPage=d,this.linkClickHandler=e.bind(null,this),this.popStateHandler=f.bind(null,this),b.addEventListener("click",this.linkClickHandler,!1),a.addEventListener("popstate",this.popStateHandler,!1),p.enableVolatileRecord(),d&&this.open(d,{transition:"none"})},t.prototype.openPopup=function(a,b){this.open(a,l.merge({rel:"popup"},b))},t.prototype.closePopup=function(){p.back()},t.prototype._loadUrl=function(a,b,c,d){var e,f,g=j.makeUrlAbsolute(a,j.getLocation()),h={},i=this;if(e=c.find(g),!e&&j.isEmbedded(g))return d.reject(h),void 0;if(e)return h=l.merge({absUrl:g},b),d.resolve(h,e),void 0;b.showLoadMsg&&this._showLoading(b.loadMsgDelay);try{f=new XMLHttpRequest,f.open("GET",g,!1),f.send(""),4===f.readyState&&(200===f.status||0===f.status?i._loadSuccess(g,b,c,d,f.responseText):i._loadError(g,b,d))}catch(k){i._loadError(g,b,d)}},t.prototype._loadError=function(a,b,c){var d=l.merge({url:a},b);b.showLoadMsg&&this._showError(a),h.trigger(this.container.element,"loadfailed",d),c.reject(d)},t.prototype._loadSuccess=function(a,b,c,d,e){var f=l.merge({url:a},b),g=c.parse(e,a);b.showLoadMsg&&this._hideLoading(),g?d.resolve(f,g):d.reject(f)},t.prototype._getInitialContent=function(){return this.firstPage},t.prototype._showLoading=function(a){this.container.showLoading(a)},t.prototype._showError=function(a){c.error("load error, file: ",a)},t.prototype._hideLoading=function(){this.container.hideLoading()},t.prototype.hasActivePopup=function(){return this.rule.popup&&this.rule.popup._hasActivePopup()},n.Router=t,m.initRouter(t)}(a,a.document,d),function(a,b,c){function d(a,c){var d=b.getElementById(a);return d&&k.matchesSelector(d,c)?i.setNSData(d,"url",a):d=null,d}var e,f,g=c.utils,h=g.path,i=g.DOM,j=g.object,k=g.selectors,l=c.router.micro.history,m=c.engine,n=[].slice,o={};o.defaults={transition:"none"},o.filter=c.micro.selectors.page,o.option=function(){return o.defaults},o.open=function(a,c){var d,e=b.title,f={},g=m.getRouter();d=a!==g.firstPage||c.dataUrl?i.getNSData(a,"url"):h.documentUrl.hrefNoHash,e=i.getNSData(a,"title")||k.getChildrenBySelector(a,".ui-header > .ui-title").textContent||e,i.getNSData(a,"title")||i.setNSData(a,"title",e),d&&!c.fromHashChange&&(!h.isPath(d)&&d.indexOf("#")<0&&(d=h.makeUrlAbsolute("#"+d,h.documentUrl.hrefNoHash)),f=j.multiMerge({},c,{url:d}),l.replace(f,e,d)),this._setBase(d),b.title=e,g.container.change(a,c)},o.find=function(a){var b,c=m.getRouter(),e=this._createDataUrl(a),f=c.getFirstPage(),g=c.getContainer();return/#/.test(a)&&h.isPath(e)?null:(b=g.element.querySelector("[data-url='"+e+"']"+this.filter),b||!e||h.isPath(e)||(b=d(e,this.filter)),!b&&h.isFirstPageUrl(e)&&f&&f.parentNode&&(b=f),b)},o.parse=function(a,c){var d,e,f=this._createDataUrl(c),g=b.createElement("div");return this._setBase(c),g.innerHTML=a,d=g.querySelector(this.filter),d&&(i.setNSData(d,"url",f),i.setNSData(d,"external",!0),e=d.querySelectorAll("script"),n.call(e).forEach(function(a,c){var d,e,f,g=b.createElement("script"),i=c.attributes,j=c.childNodes.length,k=c.getAttribute("src");for(null!==k&&(k=h.makeUrlAbsolute(k,a)),d=i.length-1;d>=0;d-=1)f=i[d],"src"!==f.name&&g.setAttribute(f.name,f.value);if(k)try{e=new XMLHttpRequest,e.open("GET",k,!1),e.send(""),g.type="text/javascript",g.text=e.responseText}catch(l){}else for(d=0;j>d;d++)g.appendChild(c.childNodes[d]);c.parentNode.replaceChild(g,c)}.bind(null,f))),d},o.onHashChange=function(){return null},o._createDataUrl=function(a){return h.convertUrlToDataUrl(a,!0)},o.onOpenFailed=function(){this._setBase(h.parseLocation().hrefNoSearch)},o._getBaseElement=function(){return f||(f=b.querySelector("head")),e||(e=b.querySelector("base"),e||(e=b.createElement("base"),e.href=h.documentBase.hrefNoHash,f.appendChild(e))),e},o._setBase=function(a){var b=this._getBaseElement(),c=b.href;h.isPath(a)&&(a=h.makeUrlAbsolute(a,h.documentBase),h.parseUrl(c).hrefNoSearch!==h.parseUrl(a).hrefNoSearch&&(b.href=a,h.documentBase=h.parseUrl(h.makeUrlAbsolute(a,h.documentUrl.href))))},c.router.micro.route.page=o}(a,a.document,d),function(a,b,c){function d(a,c){var d=b.getElementById(g.hashToSelector(a));return d&&h.matchesSelector(d,c)?k.setNSData(d,"url",a):d=null,d}var e={defaults:{transition:"none",container:null,volatileRecord:!0},filter:c.micro.selectors.popup,activePopup:null,events:{popup_hide:"popuphide"}},f=c.engine,g=c.utils.path,h=c.utils.selectors,i=c.router.micro.history,j=c.utils.path,k=c.utils.DOM,l=[].slice,m="popup=true",n=/([&|\?]popup=true)/;e.option=function(){return e.defaults},e.open=function(a,c){var d,h,l,o=f.getRouter(),p=j.getLocation(),q=function(){b.removeEventListener(e.events.popup_hide,q,!1),a.parentNode.removeChild(a),e.activePopup=null},r=function(){b.removeEventListener(e.events.popup_hide,r,!1),d=f.instanceWidget(a,"popup",c),d.open(),e.activePopup=d},s=g.getLocation().replace(n,""),t=o.container.getActivePage();h=m,c.fromHashChange||(p=g.addHashSearchParams(s,h),i.replace(c,"",p)),k.getNSData(a,"external")===!0&&(l=c.container?t.element.querySelector(c.container):t.element,l.appendChild(a),b.addEventListener(e.events.popup_hide,q,!1)),e._hasActivePopup()?(b.addEventListener(e.events.popup_hide,r,!1),e._closeActivePopup()):r()},e._closeActivePopup=function(a){a=a||e.activePopup,a&&(a.close(),e.activePopup=null)},e.onHashChange=function(){var a=e.activePopup;return a?(e._closeActivePopup(a),!0):!1},e.onOpenFailed=function(){return null},e.find=function(a){var b,c=this._createDataUrl(a),e=f.getRouter().getContainer().getActivePage();return b=e.element.querySelector("[data-url='"+c+"']"+this.filter),b||!c||g.isPath(c)||(b=d(c,this.filter)),b},e.parse=function(a,c){var d,e,f=this._createDataUrl(c),h=b.createElement("div");return h.innerHTML=a,d=h.querySelector(this.filter),k.setNSData(d,"url",f),k.setNSData(d,"external",!0),e=d.querySelectorAll("script"),l.call(e).forEach(function(a,c){var d,e,f,h=b.createElement("script"),i=c.attributes,j=c.childNodes.length,k=c.getAttribute("src");for(null!==k&&(k=g.makeUrlAbsolute(k,a)),d=i.length-1;d>=0;d-=1)f=i[d],"src"!==f.name&&h.setAttribute(f.name,f.value);if(k)try{e=new XMLHttpRequest,e.open("GET",k,!1),e.send(""),h.type="text/javascript",h.text=e.responseText}catch(l){}else for(d=0;j>d;d++)h.appendChild(c.childNodes[d]);c.parentNode.replaceChild(h,c)}.bind(null,f)),d},e._createDataUrl=function(a){return g.convertUrlToDataUrl(a)},e._hasActivePopup=function(){var a=b.querySelector(".ui-popup-active");return e.activePopup=a&&f.instanceWidget(a,"popup"),!!e.activePopup},c.router.micro.route.popup=e}(a,a.document,d),function(a){a.get("autorun",!0)===!0&&a.engine.run()}(d)}(window,window.document);