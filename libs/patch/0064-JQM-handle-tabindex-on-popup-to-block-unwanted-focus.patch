From f8197cea75f3c6ea73b64445d1cb8dc6b5768280 Mon Sep 17 00:00:00 2001
From: Jinhyuk Jun <jinhyuk.jun@samsung.com>
Date: Mon, 12 Aug 2013 16:30:05 +0900
Subject: [PATCH] JQM handle tabindex on popup to block unwanted focusing by
 tabkey

Change-Id: I7062cd2435d3adf1122eda3dc512c16acceeb6f8
---
 libs/js/jquery-mobile-1.2.0/js/widgets/popup.js |   14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/libs/js/jquery-mobile-1.2.0/js/widgets/popup.js b/libs/js/jquery-mobile-1.2.0/js/widgets/popup.js
index 3a44417..5610bf9 100644
--- a/libs/js/jquery-mobile-1.2.0/js/widgets/popup.js
+++ b/libs/js/jquery-mobile-1.2.0/js/widgets/popup.js
@@ -160,6 +160,7 @@ define( [ "jquery",
 				},
 				thisPage = this.element.closest( ".ui-page" ),
 				myId = this.element.attr( "id" ),
+				popupInput = $.find( "input" ),
 				self = this;
 
 			// We need to adjust the history option to be false if there's no AJAX nav.
@@ -225,6 +226,12 @@ define( [ "jquery",
 			$.each( this._globalHandlers, function( idx, value ) {
 				value.src.bind( value.handler );
 			});
+
+                        if ( popupInput.length ) {
+                                $.each( popupInput, function ( i ) {
+                                        $( popupInput ).eq( i ).attr( "tabindex", "-1" );
+                                });
+                        }
 		},
 
 		_applyTheme: function( dst, theme, prefix ) {
@@ -594,6 +601,7 @@ define( [ "jquery",
 
 		_open: function( options ) {
 			var coords, transition,
+				$popupInput = $( this.element ).find( "input" ),
 				androidBlacklist = ( function() {
 					var w = window,
 						ua = navigator.userAgent,
@@ -675,6 +683,12 @@ define( [ "jquery",
 				applyTransition: false,
 				prereqs: this._prereqs
 			});
+
+                        if ( $popupInput.length ) {
+                                $.each( $popupInput, function ( i ) {
+                                        $popupInput.eq( i ).removeAttr( "tabindex" );
+                                });
+                        }
 		},
 
 		_closePrereqScreen: function() {
-- 
1.7.9.5

